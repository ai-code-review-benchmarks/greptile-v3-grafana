// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire gen -tags "enterprise"
//go:build !wireinject
// +build !wireinject

package server

import (
	"github.com/google/wire"
	httpclient2 "github.com/grafana/grafana-plugin-sdk-go/backend/httpclient"
	"github.com/grafana/grafana/apps/advisor/pkg/app/checkregistry"
	"github.com/grafana/grafana/pkg/api"
	"github.com/grafana/grafana/pkg/api/avatar"
	"github.com/grafana/grafana/pkg/api/routing"
	"github.com/grafana/grafana/pkg/bus"
	"github.com/grafana/grafana/pkg/expr"
	"github.com/grafana/grafana/pkg/extensions/accesscontrol"
	acimpl2 "github.com/grafana/grafana/pkg/extensions/accesscontrol/acimpl"
	database3 "github.com/grafana/grafana/pkg/extensions/accesscontrol/database"
	"github.com/grafana/grafana/pkg/extensions/accesscontrol/provisioner"
	"github.com/grafana/grafana/pkg/extensions/alertenrichment"
	"github.com/grafana/grafana/pkg/extensions/analytics"
	"github.com/grafana/grafana/pkg/extensions/analytics/datasources"
	database10 "github.com/grafana/grafana/pkg/extensions/analytics/datasources/database"
	"github.com/grafana/grafana/pkg/extensions/analytics/sortoptions"
	"github.com/grafana/grafana/pkg/extensions/analytics/summaries"
	api5 "github.com/grafana/grafana/pkg/extensions/analytics/summaries/api"
	database11 "github.com/grafana/grafana/pkg/extensions/analytics/summaries/database"
	api6 "github.com/grafana/grafana/pkg/extensions/analytics/views/api"
	database12 "github.com/grafana/grafana/pkg/extensions/analytics/views/database"
	service14 "github.com/grafana/grafana/pkg/extensions/analytics/views/service"
	"github.com/grafana/grafana/pkg/extensions/anonymous"
	apiserver2 "github.com/grafana/grafana/pkg/extensions/apiserver"
	"github.com/grafana/grafana/pkg/extensions/apiserver/registry"
	alertenrichment2 "github.com/grafana/grafana/pkg/extensions/apiserver/registry/alertenrichment"
	"github.com/grafana/grafana/pkg/extensions/apiserver/registry/banners"
	"github.com/grafana/grafana/pkg/extensions/apiserver/registry/iam/corerole"
	"github.com/grafana/grafana/pkg/extensions/apiserver/registry/querylibrary"
	"github.com/grafana/grafana/pkg/extensions/apiserver/registry/reporting"
	"github.com/grafana/grafana/pkg/extensions/apiserver/registry/sandboxsettings"
	"github.com/grafana/grafana/pkg/extensions/apiserver/registry/scim"
	"github.com/grafana/grafana/pkg/extensions/apiserver/registry/scope"
	secret2 "github.com/grafana/grafana/pkg/extensions/apiserver/registry/secret"
	"github.com/grafana/grafana/pkg/extensions/apiserver/registry/usageinsights"
	"github.com/grafana/grafana/pkg/extensions/auditing"
	"github.com/grafana/grafana/pkg/extensions/auth"
	idimpl2 "github.com/grafana/grafana/pkg/extensions/auth/idimpl"
	backgroundsvcs2 "github.com/grafana/grafana/pkg/extensions/backgroundsvcs"
	"github.com/grafana/grafana/pkg/extensions/bannersettings"
	"github.com/grafana/grafana/pkg/extensions/billing"
	"github.com/grafana/grafana/pkg/extensions/caching"
	"github.com/grafana/grafana/pkg/extensions/caching/storage"
	"github.com/grafana/grafana/pkg/extensions/config/vault"
	"github.com/grafana/grafana/pkg/extensions/disableunsignedplugins"
	"github.com/grafana/grafana/pkg/extensions/dspermissions/guardian"
	"github.com/grafana/grafana/pkg/extensions/embeddedapiserver/aggregatorrunner"
	"github.com/grafana/grafana/pkg/extensions/encryption"
	api9 "github.com/grafana/grafana/pkg/extensions/enterprisepublicdashboards/api"
	database6 "github.com/grafana/grafana/pkg/extensions/enterprisepublicdashboards/database"
	metric2 "github.com/grafana/grafana/pkg/extensions/enterprisepublicdashboards/metric"
	"github.com/grafana/grafana/pkg/extensions/enterprisepublicdashboards/middleware"
	service5 "github.com/grafana/grafana/pkg/extensions/enterprisepublicdashboards/service"
	"github.com/grafana/grafana/pkg/extensions/enterpriseusagestatssvcs"
	"github.com/grafana/grafana/pkg/extensions/groupsync"
	"github.com/grafana/grafana/pkg/extensions/kmsproviders"
	"github.com/grafana/grafana/pkg/extensions/ldapdebug"
	"github.com/grafana/grafana/pkg/extensions/ldapsync"
	api8 "github.com/grafana/grafana/pkg/extensions/licensing/api"
	database2 "github.com/grafana/grafana/pkg/extensions/licensing/database"
	"github.com/grafana/grafana/pkg/extensions/licensing/licensingtest"
	service2 "github.com/grafana/grafana/pkg/extensions/licensing/service"
	migrations2 "github.com/grafana/grafana/pkg/extensions/migrations"
	"github.com/grafana/grafana/pkg/extensions/pluginsintegration"
	"github.com/grafana/grafana/pkg/extensions/pluginsintegration/cdn"
	"github.com/grafana/grafana/pkg/extensions/pluginsintegration/managedinstance"
	provider2 "github.com/grafana/grafana/pkg/extensions/pluginsintegration/provider"
	"github.com/grafana/grafana/pkg/extensions/pluginsintegration/remote"
	sources2 "github.com/grafana/grafana/pkg/extensions/pluginsintegration/sources"
	service11 "github.com/grafana/grafana/pkg/extensions/provisioning/service"
	"github.com/grafana/grafana/pkg/extensions/ratelimiting"
	"github.com/grafana/grafana/pkg/extensions/recordedqueries"
	"github.com/grafana/grafana/pkg/extensions/remoteruler"
	"github.com/grafana/grafana/pkg/extensions/report"
	api7 "github.com/grafana/grafana/pkg/extensions/report/api"
	"github.com/grafana/grafana/pkg/extensions/report/brandingstorage"
	database8 "github.com/grafana/grafana/pkg/extensions/report/database"
	"github.com/grafana/grafana/pkg/extensions/report/render"
	"github.com/grafana/grafana/pkg/extensions/report/scheduler"
	"github.com/grafana/grafana/pkg/extensions/report/sender"
	service15 "github.com/grafana/grafana/pkg/extensions/report/service"
	"github.com/grafana/grafana/pkg/extensions/requestinterceptor"
	"github.com/grafana/grafana/pkg/extensions/saml"
	searchV2_2 "github.com/grafana/grafana/pkg/extensions/searchV2"
	filters2 "github.com/grafana/grafana/pkg/extensions/searchusers/filters"
	manager4 "github.com/grafana/grafana/pkg/extensions/searchusers/manager"
	secretkeeper2 "github.com/grafana/grafana/pkg/extensions/secret/secretkeeper"
	migrator2 "github.com/grafana/grafana/pkg/extensions/secrets/migrator"
	"github.com/grafana/grafana/pkg/extensions/settings/settingsprovider"
	unified2 "github.com/grafana/grafana/pkg/extensions/storage/unified"
	"github.com/grafana/grafana/pkg/extensions/teamgroupsync"
	database9 "github.com/grafana/grafana/pkg/extensions/teamgroupsync/database"
	"github.com/grafana/grafana/pkg/extensions/teamlbac"
	usageinsights2 "github.com/grafana/grafana/pkg/extensions/usageinsights"
	"github.com/grafana/grafana/pkg/extensions/userprotection"
	"github.com/grafana/grafana/pkg/extensions/whitelabeling"
	"github.com/grafana/grafana/pkg/infra/db"
	"github.com/grafana/grafana/pkg/infra/httpclient"
	"github.com/grafana/grafana/pkg/infra/httpclient/httpclientprovider"
	"github.com/grafana/grafana/pkg/infra/kvstore"
	"github.com/grafana/grafana/pkg/infra/localcache"
	"github.com/grafana/grafana/pkg/infra/log/slogadapter"
	"github.com/grafana/grafana/pkg/infra/metrics"
	"github.com/grafana/grafana/pkg/infra/remotecache"
	"github.com/grafana/grafana/pkg/infra/serverlock"
	"github.com/grafana/grafana/pkg/infra/tracing"
	"github.com/grafana/grafana/pkg/infra/usagestats"
	"github.com/grafana/grafana/pkg/infra/usagestats/service"
	"github.com/grafana/grafana/pkg/infra/usagestats/statscollector"
	"github.com/grafana/grafana/pkg/infra/usagestats/validator"
	"github.com/grafana/grafana/pkg/login/social"
	"github.com/grafana/grafana/pkg/login/social/connectors"
	"github.com/grafana/grafana/pkg/login/social/socialimpl"
	"github.com/grafana/grafana/pkg/middleware/csrf"
	"github.com/grafana/grafana/pkg/middleware/loggermw"
	"github.com/grafana/grafana/pkg/plugins/backendplugin/coreplugin"
	manager3 "github.com/grafana/grafana/pkg/plugins/manager"
	"github.com/grafana/grafana/pkg/plugins/manager/filestore"
	"github.com/grafana/grafana/pkg/plugins/manager/loader/assetpath"
	"github.com/grafana/grafana/pkg/plugins/manager/process"
	"github.com/grafana/grafana/pkg/plugins/manager/registry"
	"github.com/grafana/grafana/pkg/plugins/manager/signature"
	"github.com/grafana/grafana/pkg/plugins/manager/sources"
	"github.com/grafana/grafana/pkg/plugins/pluginscdn"
	"github.com/grafana/grafana/pkg/plugins/repo"
	"github.com/grafana/grafana/pkg/registry/apis"
	"github.com/grafana/grafana/pkg/registry/apis/dashboard"
	"github.com/grafana/grafana/pkg/registry/apis/dashboard/legacy"
	"github.com/grafana/grafana/pkg/registry/apis/dashboardsnapshot"
	"github.com/grafana/grafana/pkg/registry/apis/datasource"
	"github.com/grafana/grafana/pkg/registry/apis/featuretoggle"
	"github.com/grafana/grafana/pkg/registry/apis/folders"
	"github.com/grafana/grafana/pkg/registry/apis/iam"
	"github.com/grafana/grafana/pkg/registry/apis/ofrep"
	provisioning2 "github.com/grafana/grafana/pkg/registry/apis/provisioning"
	"github.com/grafana/grafana/pkg/registry/apis/provisioning/repository/github"
	"github.com/grafana/grafana/pkg/registry/apis/provisioning/webhooks"
	query2 "github.com/grafana/grafana/pkg/registry/apis/query"
	"github.com/grafana/grafana/pkg/registry/apis/secret"
	"github.com/grafana/grafana/pkg/registry/apis/secret/contracts"
	"github.com/grafana/grafana/pkg/registry/apis/secret/decrypt"
	encryption3 "github.com/grafana/grafana/pkg/registry/apis/secret/encryption"
	manager5 "github.com/grafana/grafana/pkg/registry/apis/secret/encryption/manager"
	"github.com/grafana/grafana/pkg/registry/apis/secret/secretkeeper"
	service16 "github.com/grafana/grafana/pkg/registry/apis/secret/service"
	"github.com/grafana/grafana/pkg/registry/apis/userstorage"
	"github.com/grafana/grafana/pkg/registry/apps"
	advisor2 "github.com/grafana/grafana/pkg/registry/apps/advisor"
	notifications2 "github.com/grafana/grafana/pkg/registry/apps/alerting/notifications"
	"github.com/grafana/grafana/pkg/registry/apps/investigations"
	"github.com/grafana/grafana/pkg/registry/apps/playlist"
	"github.com/grafana/grafana/pkg/registry/backgroundsvcs"
	"github.com/grafana/grafana/pkg/registry/usagestatssvcs"
	accesscontrol2 "github.com/grafana/grafana/pkg/services/accesscontrol"
	"github.com/grafana/grafana/pkg/services/accesscontrol/acimpl"
	dualwrite2 "github.com/grafana/grafana/pkg/services/accesscontrol/dualwrite"
	"github.com/grafana/grafana/pkg/services/accesscontrol/ossaccesscontrol"
	"github.com/grafana/grafana/pkg/services/accesscontrol/permreg"
	"github.com/grafana/grafana/pkg/services/accesscontrol/resourcepermissions"
	"github.com/grafana/grafana/pkg/services/annotations"
	"github.com/grafana/grafana/pkg/services/annotations/annotationsimpl"
	"github.com/grafana/grafana/pkg/services/anonymous/anonimpl"
	"github.com/grafana/grafana/pkg/services/anonymous/anonimpl/anonstore"
	"github.com/grafana/grafana/pkg/services/apikey/apikeyimpl"
	"github.com/grafana/grafana/pkg/services/apiserver"
	"github.com/grafana/grafana/pkg/services/apiserver/builder"
	"github.com/grafana/grafana/pkg/services/apiserver/standalone"
	auth2 "github.com/grafana/grafana/pkg/services/auth"
	"github.com/grafana/grafana/pkg/services/auth/authimpl"
	"github.com/grafana/grafana/pkg/services/auth/idimpl"
	"github.com/grafana/grafana/pkg/services/auth/jwt"
	"github.com/grafana/grafana/pkg/services/authn/authnimpl"
	"github.com/grafana/grafana/pkg/services/authz"
	"github.com/grafana/grafana/pkg/services/cleanup"
	"github.com/grafana/grafana/pkg/services/cloudmigration/cloudmigrationimpl"
	"github.com/grafana/grafana/pkg/services/contexthandler"
	"github.com/grafana/grafana/pkg/services/correlations"
	"github.com/grafana/grafana/pkg/services/dashboardimport"
	service12 "github.com/grafana/grafana/pkg/services/dashboardimport/service"
	dashboards2 "github.com/grafana/grafana/pkg/services/dashboards"
	database4 "github.com/grafana/grafana/pkg/services/dashboards/database"
	service7 "github.com/grafana/grafana/pkg/services/dashboards/service"
	"github.com/grafana/grafana/pkg/services/dashboardsnapshots"
	database7 "github.com/grafana/grafana/pkg/services/dashboardsnapshots/database"
	service10 "github.com/grafana/grafana/pkg/services/dashboardsnapshots/service"
	"github.com/grafana/grafana/pkg/services/dashboardversion/dashverimpl"
	"github.com/grafana/grafana/pkg/services/datasourceproxy"
	datasources2 "github.com/grafana/grafana/pkg/services/datasources"
	service9 "github.com/grafana/grafana/pkg/services/datasources/service"
	encryption4 "github.com/grafana/grafana/pkg/services/encryption"
	"github.com/grafana/grafana/pkg/services/encryption/provider"
	service3 "github.com/grafana/grafana/pkg/services/encryption/service"
	"github.com/grafana/grafana/pkg/services/extsvcauth"
	registry2 "github.com/grafana/grafana/pkg/services/extsvcauth/registry"
	"github.com/grafana/grafana/pkg/services/featuremgmt"
	"github.com/grafana/grafana/pkg/services/folder"
	"github.com/grafana/grafana/pkg/services/folder/folderimpl"
	"github.com/grafana/grafana/pkg/services/grpcserver"
	"github.com/grafana/grafana/pkg/services/grpcserver/context"
	"github.com/grafana/grafana/pkg/services/grpcserver/interceptors"
	"github.com/grafana/grafana/pkg/services/hooks"
	"github.com/grafana/grafana/pkg/services/kmsproviders/osskmsproviders"
	api4 "github.com/grafana/grafana/pkg/services/ldap/api"
	service13 "github.com/grafana/grafana/pkg/services/ldap/service"
	"github.com/grafana/grafana/pkg/services/libraryelements"
	"github.com/grafana/grafana/pkg/services/librarypanels"
	"github.com/grafana/grafana/pkg/services/live"
	"github.com/grafana/grafana/pkg/services/live/pushhttp"
	"github.com/grafana/grafana/pkg/services/login"
	"github.com/grafana/grafana/pkg/services/login/authinfoimpl"
	"github.com/grafana/grafana/pkg/services/loginattempt"
	"github.com/grafana/grafana/pkg/services/loginattempt/loginattemptimpl"
	"github.com/grafana/grafana/pkg/services/mtdsclient"
	"github.com/grafana/grafana/pkg/services/navtree/navtreeimpl"
	"github.com/grafana/grafana/pkg/services/ngalert"
	"github.com/grafana/grafana/pkg/services/ngalert/image"
	metrics2 "github.com/grafana/grafana/pkg/services/ngalert/metrics"
	store2 "github.com/grafana/grafana/pkg/services/ngalert/store"
	"github.com/grafana/grafana/pkg/services/notifications"
	"github.com/grafana/grafana/pkg/services/oauthtoken"
	"github.com/grafana/grafana/pkg/services/oauthtoken/oauthtokentest"
	"github.com/grafana/grafana/pkg/services/org/orgimpl"
	"github.com/grafana/grafana/pkg/services/playlist/playlistimpl"
	"github.com/grafana/grafana/pkg/services/plugindashboards"
	service8 "github.com/grafana/grafana/pkg/services/plugindashboards/service"
	pluginsintegration2 "github.com/grafana/grafana/pkg/services/pluginsintegration"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/advisor"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/angulardetectorsprovider"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/angularinspector"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/angularpatternsstore"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/dashboards"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/keyretriever"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/keyretriever/dynamic"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/keystore"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/licensing"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/loader"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/pipeline"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/pluginaccesscontrol"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/pluginassets"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/pluginchecker"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/pluginconfig"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/plugincontext"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/pluginerrs"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/pluginexternal"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/plugininstaller"
	service6 "github.com/grafana/grafana/pkg/services/pluginsintegration/pluginsettings/service"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/pluginstore"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/renderer"
	"github.com/grafana/grafana/pkg/services/pluginsintegration/serviceregistration"
	"github.com/grafana/grafana/pkg/services/preference/prefimpl"
	"github.com/grafana/grafana/pkg/services/provisioning"
	"github.com/grafana/grafana/pkg/services/publicdashboards"
	api2 "github.com/grafana/grafana/pkg/services/publicdashboards/api"
	database5 "github.com/grafana/grafana/pkg/services/publicdashboards/database"
	"github.com/grafana/grafana/pkg/services/publicdashboards/metric"
	service4 "github.com/grafana/grafana/pkg/services/publicdashboards/service"
	"github.com/grafana/grafana/pkg/services/query"
	"github.com/grafana/grafana/pkg/services/queryhistory"
	"github.com/grafana/grafana/pkg/services/quota/quotaimpl"
	"github.com/grafana/grafana/pkg/services/rendering"
	search2 "github.com/grafana/grafana/pkg/services/search"
	"github.com/grafana/grafana/pkg/services/search/sort"
	"github.com/grafana/grafana/pkg/services/searchV2"
	"github.com/grafana/grafana/pkg/services/searchusers"
	"github.com/grafana/grafana/pkg/services/searchusers/filters"
	"github.com/grafana/grafana/pkg/services/secrets"
	"github.com/grafana/grafana/pkg/services/secrets/database"
	kvstore2 "github.com/grafana/grafana/pkg/services/secrets/kvstore"
	migrations3 "github.com/grafana/grafana/pkg/services/secrets/kvstore/migrations"
	"github.com/grafana/grafana/pkg/services/secrets/manager"
	"github.com/grafana/grafana/pkg/services/secrets/migrator"
	"github.com/grafana/grafana/pkg/services/serviceaccounts"
	"github.com/grafana/grafana/pkg/services/serviceaccounts/extsvcaccounts"
	manager2 "github.com/grafana/grafana/pkg/services/serviceaccounts/manager"
	"github.com/grafana/grafana/pkg/services/serviceaccounts/proxy"
	"github.com/grafana/grafana/pkg/services/serviceaccounts/retriever"
	"github.com/grafana/grafana/pkg/services/shorturls"
	"github.com/grafana/grafana/pkg/services/shorturls/shorturlimpl"
	"github.com/grafana/grafana/pkg/services/signingkeys"
	"github.com/grafana/grafana/pkg/services/signingkeys/signingkeysimpl"
	"github.com/grafana/grafana/pkg/services/sqlstore"
	"github.com/grafana/grafana/pkg/services/sqlstore/migrations"
	"github.com/grafana/grafana/pkg/services/sqlstore/sqlutil"
	"github.com/grafana/grafana/pkg/services/ssosettings"
	"github.com/grafana/grafana/pkg/services/ssosettings/ssosettingsimpl"
	api3 "github.com/grafana/grafana/pkg/services/star/api"
	"github.com/grafana/grafana/pkg/services/star/starimpl"
	"github.com/grafana/grafana/pkg/services/stats/statsimpl"
	"github.com/grafana/grafana/pkg/services/store"
	"github.com/grafana/grafana/pkg/services/store/resolver"
	"github.com/grafana/grafana/pkg/services/store/sanitizer"
	"github.com/grafana/grafana/pkg/services/supportbundles"
	"github.com/grafana/grafana/pkg/services/supportbundles/bundleregistry"
	"github.com/grafana/grafana/pkg/services/supportbundles/supportbundlesimpl"
	"github.com/grafana/grafana/pkg/services/tag"
	"github.com/grafana/grafana/pkg/services/tag/tagimpl"
	"github.com/grafana/grafana/pkg/services/team/teamapi"
	"github.com/grafana/grafana/pkg/services/team/teamimpl"
	"github.com/grafana/grafana/pkg/services/temp_user"
	"github.com/grafana/grafana/pkg/services/temp_user/tempuserimpl"
	"github.com/grafana/grafana/pkg/services/updatemanager"
	"github.com/grafana/grafana/pkg/services/user"
	"github.com/grafana/grafana/pkg/services/user/userimpl"
	"github.com/grafana/grafana/pkg/setting"
	"github.com/grafana/grafana/pkg/storage/legacysql/dualwrite"
	database13 "github.com/grafana/grafana/pkg/storage/secret/database"
	encryption2 "github.com/grafana/grafana/pkg/storage/secret/encryption"
	"github.com/grafana/grafana/pkg/storage/secret/metadata"
	migrator3 "github.com/grafana/grafana/pkg/storage/secret/migrator"
	"github.com/grafana/grafana/pkg/storage/unified"
	"github.com/grafana/grafana/pkg/storage/unified/resource"
	"github.com/grafana/grafana/pkg/storage/unified/search"
	"github.com/grafana/grafana/pkg/tsdb/azuremonitor"
	"github.com/grafana/grafana/pkg/tsdb/cloud-monitoring"
	"github.com/grafana/grafana/pkg/tsdb/cloudwatch"
	"github.com/grafana/grafana/pkg/tsdb/elasticsearch"
	"github.com/grafana/grafana/pkg/tsdb/grafana-postgresql-datasource"
	"github.com/grafana/grafana/pkg/tsdb/grafana-pyroscope-datasource"
	"github.com/grafana/grafana/pkg/tsdb/grafana-testdata-datasource"
	"github.com/grafana/grafana/pkg/tsdb/grafanads"
	"github.com/grafana/grafana/pkg/tsdb/graphite"
	"github.com/grafana/grafana/pkg/tsdb/influxdb"
	"github.com/grafana/grafana/pkg/tsdb/jaeger"
	"github.com/grafana/grafana/pkg/tsdb/loki"
	"github.com/grafana/grafana/pkg/tsdb/mssql"
	"github.com/grafana/grafana/pkg/tsdb/mysql"
	"github.com/grafana/grafana/pkg/tsdb/opentsdb"
	"github.com/grafana/grafana/pkg/tsdb/parca"
	"github.com/grafana/grafana/pkg/tsdb/prometheus"
	"github.com/grafana/grafana/pkg/tsdb/tempo"
	"github.com/grafana/grafana/pkg/tsdb/zipkin"
	"github.com/stretchr/testify/mock"
	"go.opentelemetry.io/otel"
	"go.opentelemetry.io/otel/trace"
)

import (
	_ "github.com/grafana/grafana/pkg/extensions"
)

// Injectors from wire.go:

func Initialize(cfg *setting.Cfg, opts Options, apiOpts api.ServerOptions) (*Server, error) {
	routeRegisterImpl := routing.ProvideRegister()
	tracingConfig, err := tracing.ProvideTracingConfig(cfg)
	if err != nil {
		return nil, err
	}
	tracingService, err := tracing.ProvideService(tracingConfig)
	if err != nil {
		return nil, err
	}
	inProcBus := bus.ProvideBus(tracingService)
	featureManager, err := featuremgmt.ProvideManagerService(cfg)
	if err != nil {
		return nil, err
	}
	featureToggles := featuremgmt.ProvideToggles(featureManager)
	ossMigrations := migrations.ProvideOSSMigrations(featureToggles)
	enterpriseMigrations := migrations2.ProvideEnterpriseMigrations(cfg, ossMigrations, featureToggles)
	sqlStore, err := sqlstore.ProvideService(cfg, featureToggles, enterpriseMigrations, inProcBus, tracingService)
	if err != nil {
		return nil, err
	}
	kvStore := kvstore.ProvideService(sqlStore)
	accessControl := acimpl.ProvideAccessControl(featureToggles)
	bundleregistryService := bundleregistry.ProvideService()
	usageStats, err := service.ProvideService(cfg, kvStore, routeRegisterImpl, tracingService, accessControl, bundleregistryService)
	if err != nil {
		return nil, err
	}
	secretsStoreImpl := database.ProvideSecretsStore(sqlStore)
	providerProvider := provider.ProvideEncryptionProvider()
	licensingStore, err := database2.ProvideStore(sqlStore)
	if err != nil {
		return nil, err
	}
	licenseTokenService, err := service2.ProvideLicenseTokenService(cfg, licensingStore)
	if err != nil {
		return nil, err
	}
	encryptionProvider := encryption.ProvideEncryptionProvider(providerProvider, licenseTokenService)
	serviceService, err := service3.ProvideEncryptionService(tracingService, encryptionProvider, usageStats, cfg)
	if err != nil {
		return nil, err
	}
	osskmsprovidersService := osskmsproviders.ProvideService(serviceService, cfg, featureToggles)
	keyProvidersService := kmsproviders.ProvideService(osskmsprovidersService, cfg, featureToggles, licenseTokenService)
	secretsService, err := manager.ProvideSecretsService(tracingService, secretsStoreImpl, keyProvidersService, serviceService, cfg, featureToggles, usageStats)
	if err != nil {
		return nil, err
	}
	remoteCache, err := remotecache.ProvideService(cfg, sqlStore, usageStats, secretsService)
	if err != nil {
		return nil, err
	}
	cacheService := localcache.ProvideService()
	quotaService := quotaimpl.ProvideService(sqlStore, cfg)
	orgService, err := orgimpl.ProvideService(sqlStore, cfg, quotaService)
	if err != nil {
		return nil, err
	}
	teamService, err := teamimpl.ProvideService(sqlStore, cfg, tracingService)
	if err != nil {
		return nil, err
	}
	userService, err := userimpl.ProvideService(sqlStore, orgService, cfg, teamService, cacheService, tracingService, quotaService, bundleregistryService)
	if err != nil {
		return nil, err
	}
	serverLockService := serverlock.ProvideService(sqlStore, tracingService)
	userAuthTokenService, err := authimpl.ProvideUserAuthTokenService(sqlStore, serverLockService, quotaService, secretsService, cfg, tracingService, featureToggles)
	if err != nil {
		return nil, err
	}
	enterpriseUserAuthTokenService := auth.ProvideService(sqlStore, licenseTokenService, usageStats, userAuthTokenService, userService, cfg)
	registerer := metrics.ProvideRegisterer()
	loginStore := authinfoimpl.ProvideStore(sqlStore, secretsService)
	authinfoimplService := authinfoimpl.ProvideService(loginStore, remoteCache, secretsService)
	authnimplService := authnimpl.ProvideService(cfg, tracingService, enterpriseUserAuthTokenService, usageStats, registerer, authinfoimplService)
	authnService := authnimpl.ProvideAuthnService(authnimplService)
	actionSetService := resourcepermissions.NewActionSetService()
	accessControlStore := database3.ProvideService(sqlStore, featureToggles, tracingService)
	permissionRegistry := permreg.ProvidePermissionRegistry()
	acimplService, err := acimpl2.ProvideService(cfg, routeRegisterImpl, licenseTokenService, cacheService, accessControl, sqlStore, userService, authnService, actionSetService, featureToggles, serverLockService, accessControlStore, tracingService, permissionRegistry)
	if err != nil {
		return nil, err
	}
	implementation, err := settingsprovider.ProvideService(cfg, featureToggles, sqlStore, routeRegisterImpl, secretsService, accessControl, acimplService)
	if err != nil {
		return nil, err
	}
	pluginManagementCfg, err := pluginconfig.ProvidePluginManagementConfig(cfg, implementation, featureToggles)
	if err != nil {
		return nil, err
	}
	pluginInstanceCfg, err := pluginconfig.ProvidePluginInstanceConfig(cfg, implementation, featureToggles)
	if err != nil {
		return nil, err
	}
	licensingService := licensing.ProvideLicensing(cfg, licenseTokenService)
	envVarsProvider := pluginconfig.NewEnvVarsProvider(pluginInstanceCfg, licensingService)
	inMemory := registry.ProvideService()
	rendererManager, err := renderer.ProvideService(pluginManagementCfg, envVarsProvider, inMemory, tracingService)
	if err != nil {
		return nil, err
	}
	renderingService, err := rendering.ProvideService(cfg, featureToggles, remoteCache, rendererManager)
	if err != nil {
		return nil, err
	}
	hooksService := hooks.ProvideService()
	urlValidator := requestinterceptor.ProvideURLValidator(cfg)
	requestInterceptor := requestinterceptor.ProvideService(cfg, urlValidator)
	sourcesService := sources.ProvideService(cfg, pluginManagementCfg)
	pluginscdnService := pluginscdn.ProvideService(pluginManagementCfg)
	service17 := sources2.ProvideService(sourcesService, pluginManagementCfg, pluginscdnService)
	discovery := pipeline.ProvideDiscoveryStage(pluginManagementCfg, inMemory)
	keystoreService := keystore.ProvideService(kvStore)
	keyRetriever := dynamic.ProvideService(cfg, keystoreService)
	keyretrieverService := keyretriever.ProvideService(keyRetriever)
	signatureSignature := signature.ProvideService(pluginManagementCfg, keyretrieverService)
	assetpathService := assetpath.ProvideService(pluginManagementCfg, pluginscdnService)
	bootstrap := pipeline.ProvideBootstrapStage(pluginManagementCfg, signatureSignature, assetpathService)
	unsignedPluginAuthorizer := signature.ProvideOSSAuthorizer(pluginManagementCfg)
	disableUnsignedPlugins := disableunsignedplugins.ProvideService(unsignedPluginAuthorizer)
	validation := signature.ProvideValidatorService(disableUnsignedPlugins)
	angularpatternsstoreService := angularpatternsstore.ProvideService(kvStore)
	angulardetectorsproviderDynamic, err := angulardetectorsprovider.ProvideDynamic(cfg, angularpatternsstoreService)
	if err != nil {
		return nil, err
	}
	angularinspectorService, err := angularinspector.ProvideService(angulardetectorsproviderDynamic)
	if err != nil {
		return nil, err
	}
	validate := pipeline.ProvideValidationStage(pluginManagementCfg, validation, angularinspectorService)
	httpclientProvider := httpclientprovider.New(cfg, urlValidator, tracingService)
	azuremonitorService := azuremonitor.ProvideService(httpclientProvider)
	cloudwatchService := cloudwatch.ProvideService()
	cloudmonitoringService := cloudmonitoring.ProvideService(httpclientProvider)
	elasticsearchService := elasticsearch.ProvideService(httpclientProvider)
	graphiteService := graphite.ProvideService(httpclientProvider, tracingService)
	influxdbService := influxdb.ProvideService(httpclientProvider, featureToggles)
	tracer := otelTracer()
	lokiService := loki.ProvideService(httpclientProvider, tracer)
	opentsdbService := opentsdb.ProvideService(httpclientProvider)
	prometheusService := prometheus.ProvideService(httpclientProvider)
	tempoService := tempo.ProvideService(httpclientProvider)
	testdatasourceService := testdatasource.ProvideService()
	postgresService := postgres.ProvideService(cfg)
	mysqlService := mysql.ProvideService()
	mssqlService := mssql.ProvideService(cfg)
	entityEventsService := store.ProvideEntityEventsService(cfg, sqlStore, featureToggles)
	folderStoreImpl := folderimpl.ProvideStore(sqlStore)
	tagimplService := tagimpl.ProvideService(sqlStore)
	dashboardsStore, err := database4.ProvideDashboardStore(sqlStore, cfg, featureToggles, tagimplService)
	if err != nil {
		return nil, err
	}
	dashboardFolderStoreImpl := folderimpl.ProvideDashboardFolderStore(sqlStore)
	publicDashboardStoreImpl := database5.ProvideStore(sqlStore, cfg, featureToggles)
	publicDashboardServiceWrapperImpl := service4.ProvideServiceWrapper(publicDashboardStoreImpl)
	enterprisePublicDashboardStoreImpl := database6.ProvideStore(sqlStore)
	servicePublicDashboardServiceWrapperImpl := service5.ProvidePublicDashboardsServiceWrapper(publicDashboardServiceWrapperImpl, enterprisePublicDashboardStoreImpl)
	apikeyService, err := apikeyimpl.ProvideService(sqlStore, cfg, quotaService)
	if err != nil {
		return nil, err
	}
	contextHandler := grpccontext.ProvideContextHandler(tracingService)
	authenticator := interceptors.ProvideAuthenticator(apikeyService, userService, acimplService, contextHandler)
	grpcserverProvider, err := grpcserver.ProvideService(cfg, featureToggles, authenticator, tracer, registerer)
	if err != nil {
		return nil, err
	}
	client, err := authz.ProvideZanzana(cfg, sqlStore, tracingService, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	eventualRestConfigProvider := apiserver.ProvideEventualRestConfigProvider()
	accessClient, err := authz.ProvideAuthZClient(cfg, featureToggles, grpcserverProvider, tracingService, registerer, sqlStore, acimplService, client, eventualRestConfigProvider)
	if err != nil {
		return nil, err
	}
	legacyDatabaseProvider := usageinsights.ProvideLegacyDatabaseProvider(sqlStore)
	legacySQLStore := usageinsights.ProvideLegacySQLStores(legacyDatabaseProvider)
	storage, err := usageinsights.ProvideStorage(legacySQLStore, tracingService)
	if err != nil {
		return nil, err
	}
	sprinklesMetrics := usageinsights2.ProvideSprinklesMetrics(registerer)
	usageinsightsService, err := usageinsights2.ProvideService(cfg, featureManager, storage, sprinklesMetrics)
	if err != nil {
		return nil, err
	}
	documentBuilderSupplier := search.ProvideDocumentBuilders(sqlStore, usageinsightsService)
	options := &unified.Options{
		Cfg:      cfg,
		Features: featureToggles,
		DB:       sqlStore,
		Tracer:   tracingService,
		Reg:      registerer,
		Authzc:   accessClient,
		Docs:     documentBuilderSupplier,
	}
	storageMetrics := resource.ProvideStorageMetrics(registerer)
	bleveIndexMetrics := resource.ProvideIndexMetrics(registerer)
	resourceClient, err := unified2.ProvideUnifiedStorageClient(options, storageMetrics, bleveIndexMetrics)
	if err != nil {
		return nil, err
	}
	dualwriteService := dualwrite.ProvideService(featureToggles, registerer, kvStore, cfg)
	sortService := sort.ProvideService()
	folderimplService := folderimpl.ProvideService(folderStoreImpl, accessControl, inProcBus, dashboardsStore, dashboardFolderStoreImpl, userService, sqlStore, featureToggles, bundleregistryService, servicePublicDashboardServiceWrapperImpl, cfg, registerer, tracer, resourceClient, dualwriteService, sortService, eventualRestConfigProvider)
	searchService := searchV2.ProvideService(cfg, sqlStore, entityEventsService, acimplService, tracingService, featureToggles, orgService, userService, folderimplService)
	systemUsers := store.ProvideSystemUsersService()
	storageService, err := store.ProvideService(sqlStore, featureToggles, cfg, quotaService, systemUsers)
	if err != nil {
		return nil, err
	}
	grafanadsService := grafanads.ProvideService(searchService, storageService, featureToggles)
	pyroscopeService := pyroscope.ProvideService(httpclientProvider)
	parcaService := parca.ProvideService(httpclientProvider)
	zipkinService := zipkin.ProvideService(httpclientProvider)
	jaegerService := jaeger.ProvideService(httpclientProvider)
	corepluginRegistry := coreplugin.ProvideCoreRegistry(tracingService, azuremonitorService, cloudwatchService, cloudmonitoringService, elasticsearchService, graphiteService, influxdbService, lokiService, opentsdbService, prometheusService, tempoService, testdatasourceService, postgresService, mysqlService, mssqlService, grafanadsService, pyroscopeService, parcaService, zipkinService, jaegerService)
	providerService := provider2.ProvideService(cfg, corepluginRegistry, licenseTokenService)
	processService := process.ProvideService()
	retrieverService := retriever.ProvideService(sqlStore, apikeyService, kvStore, userService, orgService)
	serviceAccountPermissionsService, err := ossaccesscontrol.ProvideServiceAccountPermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, licenseTokenService, retrieverService, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	serviceAccountsService, err := manager2.ProvideServiceAccountsService(cfg, usageStats, sqlStore, apikeyService, kvStore, userService, orgService, acimplService, serviceAccountPermissionsService, serverLockService)
	if err != nil {
		return nil, err
	}
	extSvcAccountsService := extsvcaccounts.ProvideExtSvcAccountsService(acimplService, cfg, inProcBus, sqlStore, featureToggles, registerer, serviceAccountsService, secretsService, tracingService)
	registryRegistry := registry2.ProvideExtSvcRegistry(cfg, extSvcAccountsService, serverLockService, featureToggles)
	service18 := service6.ProvideService(sqlStore, secretsService)
	serviceregistrationService := serviceregistration.ProvideService(cfg, featureToggles, registryRegistry, service18)
	initialize := pipeline.ProvideInitializationStage(pluginManagementCfg, inMemory, providerService, processService, serviceregistrationService, acimplService, actionSetService, envVarsProvider, tracingService)
	terminate, err := pipeline.ProvideTerminationStage(pluginManagementCfg, inMemory, processService)
	if err != nil {
		return nil, err
	}
	errorRegistry := pluginerrs.ProvideErrorTracker()
	loaderLoader := loader.ProvideService(pluginManagementCfg, discovery, bootstrap, validate, initialize, terminate, errorRegistry)
	pluginstoreService, err := pluginstore.ProvideService(inMemory, service17, loaderLoader)
	if err != nil {
		return nil, err
	}
	filestoreService := filestore.ProvideService(inMemory)
	fileStoreManager := dashboards.ProvideFileStoreManager(pluginstoreService, filestoreService)
	folderPermissionsService, err := ossaccesscontrol.ProvideFolderPermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, licenseTokenService, folderimplService, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	dashboardServiceImpl, err := service7.ProvideDashboardServiceImpl(cfg, dashboardsStore, dashboardFolderStoreImpl, featureToggles, folderPermissionsService, accessControl, acimplService, folderimplService, registerer, eventualRestConfigProvider, userService, quotaService, orgService, servicePublicDashboardServiceWrapperImpl, resourceClient, dualwriteService, sortService, serverLockService, kvStore)
	if err != nil {
		return nil, err
	}
	pluginService := service7.ProvideDashboardPluginService(featureToggles, dashboardServiceImpl)
	service19 := service8.ProvideService(fileStoreManager, pluginService)
	orgRoleMapper := connectors.ProvideOrgRoleMapper(cfg, orgService)
	ssosettingsimplService := ssosettingsimpl.ProvideService(cfg, sqlStore, accessControl, routeRegisterImpl, featureToggles, secretsService, usageStats, registerer, implementation, licenseTokenService)
	socialService := socialimpl.ProvideService(cfg, featureToggles, usageStats, bundleregistryService, remoteCache, orgRoleMapper, ssosettingsimplService)
	oauthtokenService := oauthtoken.ProvideService(socialService, authinfoimplService, cfg, registerer, serverLockService, tracingService, enterpriseUserAuthTokenService, featureToggles)
	configStorage := config.ProvideStorage(cfg, cacheService, sqlStore)
	guardianProvider := guardian.ProvideGuardian(sqlStore, accessControl, licenseTokenService)
	cachingService, err := caching.ProvideService(cfg, configStorage, hooksService, licenseTokenService, routeRegisterImpl, guardianProvider, accessControl, acimplService, cacheService, featureToggles)
	if err != nil {
		return nil, err
	}
	middlewareHandler, err := pluginsintegration.ProvideEnterpriseClientWithMiddlewares(cfg, inMemory, oauthtokenService, tracingService, cachingService, featureToggles, registerer, teamService)
	if err != nil {
		return nil, err
	}
	pluginerrsStore := pluginerrs.ProvideStore(errorRegistry)
	repoManager, err := repo.ProvideService(pluginManagementCfg)
	if err != nil {
		return nil, err
	}
	pluginInstaller := manager3.ProvideInstaller(pluginManagementCfg, inMemory, loaderLoader, repoManager, serviceregistrationService)
	managedPluginInstaller, err := managedinstance.ProvideInstaller(cfg, repoManager, pluginInstaller, routeRegisterImpl)
	if err != nil {
		return nil, err
	}
	cacheServiceImpl := service9.ProvideCacheService(cacheService, sqlStore, guardianProvider)
	shortURLService := shorturlimpl.ProvideService(sqlStore)
	queryHistoryService := queryhistory.ProvideService(cfg, sqlStore, routeRegisterImpl, accessControl)
	dashboardService := service7.ProvideDashboardService(featureToggles, dashboardServiceImpl)
	dashverService := dashverimpl.ProvideService(cfg, sqlStore, dashboardService, dashboardsStore, featureToggles, eventualRestConfigProvider, userService, resourceClient, dualwriteService, sortService)
	dashboardSnapshotStore := database7.ProvideStore(sqlStore, cfg)
	serviceImpl := service10.ProvideService(dashboardSnapshotStore, secretsService, dashboardService)
	dBstore, err := store2.ProvideDBStore(cfg, featureToggles, sqlStore, folderimplService, dashboardService, accessControl, inProcBus)
	if err != nil {
		return nil, err
	}
	deleteExpiredService := image.ProvideDeleteExpiredService(dBstore)
	tempuserService := tempuserimpl.ProvideService(sqlStore, cfg)
	cleanupServiceImpl := annotationsimpl.ProvideCleanupService(sqlStore, cfg)
	cleanUpService := cleanup.ProvideService(cfg, serverLockService, shortURLService, sqlStore, queryHistoryService, dashverService, serviceImpl, deleteExpiredService, tempuserService, tracingService, cleanupServiceImpl, dashboardService, dBstore)
	secretsKVStore, err := kvstore2.ProvideService(sqlStore, secretsService)
	if err != nil {
		return nil, err
	}
	datasourcePermissionsService, err := accesscontrol.ProvideDatasourcePermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, licenseTokenService, accessControl, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	requestConfigProvider := pluginconfig.NewRequestConfigProvider(pluginInstanceCfg)
	baseProvider := plugincontext.ProvideBaseService(cfg, requestConfigProvider)
	service20, err := service9.ProvideService(sqlStore, secretsService, secretsKVStore, cfg, featureToggles, accessControl, datasourcePermissionsService, quotaService, pluginstoreService, middlewareHandler, baseProvider)
	if err != nil {
		return nil, err
	}
	correlationsService, err := correlations.ProvideService(sqlStore, routeRegisterImpl, service20, accessControl, inProcBus, quotaService, cfg)
	if err != nil {
		return nil, err
	}
	accessControlProvisionerImpl := provisioner.ProvideService(cfg, featureToggles, licenseTokenService, sqlStore, acimplService, teamService, tracingService)
	mailer, err := notifications.ProvideSmtpService(cfg)
	if err != nil {
		return nil, err
	}
	notificationService, err := notifications.ProvideService(inProcBus, cfg, mailer, tempuserService)
	if err != nil {
		return nil, err
	}
	dashboardProvisioningService := service7.ProvideDashboardProvisioningService(featureToggles, dashboardServiceImpl)
	receiverPermissionsService, err := ossaccesscontrol.ProvideReceiverPermissionsService(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, licenseTokenService, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	provisioningServiceImpl, err := provisioning.ProvideService(accessControl, cfg, sqlStore, pluginstoreService, dBstore, serviceService, notificationService, dashboardProvisioningService, service20, correlationsService, dashboardService, folderimplService, service18, searchService, quotaService, secretsService, orgService, receiverPermissionsService, tracingService, dualwriteService)
	if err != nil {
		return nil, err
	}
	enterpriseProvisioningServiceImpl, err := service11.ProvideService(cfg, accessControl, licenseTokenService, routeRegisterImpl, accessControlProvisionerImpl, provisioningServiceImpl)
	if err != nil {
		return nil, err
	}
	dataSourceProxyService := datasourceproxy.ProvideService(cacheServiceImpl, requestInterceptor, pluginstoreService, cfg, httpclientProvider, oauthtokenService, service20, tracingService, secretsService, featureToggles)
	starService := starimpl.ProvideService(sqlStore)
	searchSearchService := search2.ProvideService(cfg, sqlStore, starService, dashboardService, folderimplService, featureToggles, sortService)
	plugincontextProvider := plugincontext.ProvideService(cfg, cacheService, pluginstoreService, cacheServiceImpl, service20, service18, requestConfigProvider)
	mtDatasourceClientBuilder := mtdsclient.NewNullMTDatasourceClientBuilder()
	exprService := expr.ProvideService(cfg, middlewareHandler, plugincontextProvider, featureToggles, registerer, tracingService, mtDatasourceClientBuilder)
	queryServiceImpl := query.ProvideService(cfg, cacheServiceImpl, exprService, requestInterceptor, middlewareHandler, plugincontextProvider, mtDatasourceClientBuilder)
	repositoryImpl := annotationsimpl.ProvideService(sqlStore, cfg, featureToggles, tagimplService, tracingService, dBstore, dashboardService, registerer)
	grafanaLive, err := live.ProvideService(plugincontextProvider, cfg, routeRegisterImpl, pluginstoreService, middlewareHandler, cacheService, cacheServiceImpl, sqlStore, secretsService, usageStats, queryServiceImpl, featureToggles, accessControl, dashboardService, repositoryImpl, orgService, eventualRestConfigProvider)
	if err != nil {
		return nil, err
	}
	gateway := pushhttp.ProvideService(cfg, grafanaLive)
	authnAuthenticator := authnimpl.ProvideAuthnServiceAuthenticateOnly(authnimplService)
	contexthandlerContextHandler := contexthandler.ProvideService(cfg, authnAuthenticator, featureToggles)
	logger := loggermw.Provide(cfg, featureToggles)
	ngAlert := metrics2.ProvideService()
	alertNG, err := ngalert.ProvideService(cfg, featureToggles, cacheServiceImpl, service20, routeRegisterImpl, sqlStore, kvStore, exprService, dataSourceProxyService, quotaService, secretsService, notificationService, ngAlert, folderimplService, accessControl, dashboardService, renderingService, inProcBus, acimplService, repositoryImpl, pluginstoreService, tracingService, dBstore, httpclientProvider, plugincontextProvider, receiverPermissionsService, userService)
	if err != nil {
		return nil, err
	}
	libraryElementService := libraryelements.ProvideService(cfg, sqlStore, routeRegisterImpl, folderimplService, featureToggles, accessControl, dashboardService, eventualRestConfigProvider, userService)
	libraryPanelService, err := librarypanels.ProvideService(cfg, sqlStore, routeRegisterImpl, libraryElementService, folderimplService)
	if err != nil {
		return nil, err
	}
	grafanaService, err := updatemanager.ProvideGrafanaService(cfg, tracingService)
	if err != nil {
		return nil, err
	}
	managedPluginService := remote.NewManagedPluginsService(cfg)
	managedinstanceClient, err := managedinstance.ProvideClient(cfg)
	if err != nil {
		return nil, err
	}
	preinstallImpl := pluginchecker.ProvidePreinstall(cfg)
	plugincheckerService := pluginchecker.ProvideService(managedPluginService, managedinstanceClient, preinstallImpl)
	pluginsService, err := updatemanager.ProvidePluginsService(cfg, pluginstoreService, managedPluginInstaller, tracingService, featureToggles, plugincheckerService)
	if err != nil {
		return nil, err
	}
	ossSearchUserFilter := filters.ProvideOSSSearchUserFilter()
	enterpriseSearchUserFilter := filters2.ProvideEnterpriseSearchUserFilter(ossSearchUserFilter)
	ossService := searchusers.ProvideUsersService(cfg, enterpriseSearchUserFilter, userService)
	enterpriseService := manager4.ProvideEnterpriseService(cfg, ossService, sqlStore)
	serviceAccountsProxy, err := proxy.ProvideServiceAccountsProxy(cfg, accessControl, acimplService, featureToggles, serviceAccountPermissionsService, serviceAccountsService, routeRegisterImpl)
	if err != nil {
		return nil, err
	}
	pluginassetsService := pluginassets.ProvideService(pluginManagementCfg, pluginscdnService, signatureSignature, pluginstoreService)
	avatarCacheServer := avatar.ProvideAvatarCacheServer(cfg)
	prefService := prefimpl.ProvideService(sqlStore, cfg)
	dashboardPermissionsService, err := ossaccesscontrol.ProvideDashboardPermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, licenseTokenService, dashboardService, folderimplService, acimplService, teamService, userService, actionSetService, dashboardServiceImpl)
	if err != nil {
		return nil, err
	}
	csrfCSRF := csrf.ProvideCSRFFilter(cfg)
	playlistService := playlistimpl.ProvideService(sqlStore, tracingService)
	secretsMigrator := migrator.ProvideSecretsMigrator(serviceService, secretsService, sqlStore, implementation, featureToggles)
	migratorSecretsMigrator := migrator2.ProvideSecretsMigrator(secretsMigrator)
	dataSourceSecretMigrationService := migrations3.ProvideDataSourceMigrationService(service20, kvStore, featureToggles)
	secretMigrationProviderImpl := migrations3.ProvideSecretMigrationProvider(serverLockService, dataSourceSecretMigrationService)
	publicDashboardServiceImpl := service4.ProvideService(cfg, featureToggles, publicDashboardStoreImpl, queryServiceImpl, repositoryImpl, accessControl, servicePublicDashboardServiceWrapperImpl, dashboardService, licenseTokenService)
	reportDatabase := database8.ProvideReportDatabase(sqlStore)
	brandingStorage := brandingstorage.ProvideBrandingStorage(storageService, systemUsers)
	renderService := render.ProvideRenderService(acimplService, cfg, renderingService, reportDatabase, prefService, dashboardService, libraryElementService, userService, brandingStorage, featureToggles)
	enterprisePublicDashboardsServiceImpl := service5.ProvideService(notificationService, renderService, enterprisePublicDashboardStoreImpl, publicDashboardServiceImpl, dashboardService)
	pubdashEmailSharingMiddleware := middleware.ProvideEmailSharingMiddleware(publicDashboardServiceImpl, enterprisePublicDashboardsServiceImpl, cfg, accessControl, licenseTokenService)
	apiApi := api2.ProvideApi(publicDashboardServiceImpl, routeRegisterImpl, accessControl, featureToggles, pubdashEmailSharingMiddleware, cfg, licenseTokenService)
	loginattemptimplService := loginattemptimpl.ProvideService(sqlStore, cfg, serverLockService)
	deletionService, err := orgimpl.ProvideDeletionService(sqlStore, cfg, dashboardService, accessControl)
	if err != nil {
		return nil, err
	}
	navtreeService := navtreeimpl.ProvideService(cfg, accessControl, pluginstoreService, service18, starService, featureToggles, dashboardService, acimplService, kvStore, apikeyService, licenseTokenService, authnService)
	searchHTTPService := searchV2.ProvideSearchHTTPService(searchService)
	statsService := statsimpl.ProvideService(cfg, sqlStore, dashboardService, folderimplService, orgService, featureToggles)
	gatherer := metrics.ProvideGatherer()
	apiAPI := api3.ProvideApi(starService, dashboardService)
	enterpriseAnonUserLimitValidator := anonymous.ProvideEnterpriseAnonUserLimitValidator(licenseTokenService)
	anonDeviceService := anonimpl.ProvideAnonymousDeviceService(usageStats, authnService, sqlStore, cfg, orgService, serverLockService, accessControl, routeRegisterImpl, enterpriseAnonUserLimitValidator)
	signingkeysimplService, err := signingkeysimpl.ProvideEmbeddedSigningKeysService(sqlStore, secretsService, remoteCache, routeRegisterImpl)
	if err != nil {
		return nil, err
	}
	localSigner, err := idimpl.ProvideLocalSigner(signingkeysimplService)
	if err != nil {
		return nil, err
	}
	externalSigner := idimpl2.ProvideSigner(implementation, localSigner)
	idimplService := idimpl.ProvideService(cfg, externalSigner, remoteCache, authnService, registerer, tracer)
	verifier := userimpl.ProvideVerifier(cfg, userService, tempuserService, notificationService, idimplService)
	httpServer, err := api.ProvideHTTPServer(apiOpts, cfg, routeRegisterImpl, inProcBus, renderingService, licenseTokenService, hooksService, cacheService, sqlStore, requestInterceptor, pluginstoreService, service19, pluginstoreService, middlewareHandler, pluginerrsStore, managedPluginInstaller, implementation, cacheServiceImpl, enterpriseUserAuthTokenService, cleanUpService, shortURLService, queryHistoryService, correlationsService, remoteCache, enterpriseProvisioningServiceImpl, accessControl, dataSourceProxyService, searchSearchService, grafanaLive, gateway, plugincontextProvider, contexthandlerContextHandler, logger, featureToggles, alertNG, libraryPanelService, libraryElementService, quotaService, socialService, tracingService, serviceService, grafanaService, pluginsService, enterpriseService, service20, queryServiceImpl, filestoreService, serviceAccountsProxy, pluginassetsService, authinfoimplService, storageService, notificationService, dashboardService, dashboardProvisioningService, folderimplService, guardianProvider, serviceImpl, service18, avatarCacheServer, prefService, folderPermissionsService, dashboardPermissionsService, dashverService, starService, csrfCSRF, managedPluginService, playlistService, apikeyService, kvStore, migratorSecretsMigrator, secretsService, secretMigrationProviderImpl, secretsKVStore, apiApi, userService, tempuserService, loginattemptimplService, orgService, deletionService, teamService, acimplService, navtreeService, repositoryImpl, tagimplService, searchHTTPService, oauthtokenService, statsService, authnService, pluginscdnService, gatherer, apiAPI, registerer, eventualRestConfigProvider, anonDeviceService, verifier, preinstallImpl)
	if err != nil {
		return nil, err
	}
	validatorService, err := validator.ProvideService(pluginstoreService)
	if err != nil {
		return nil, err
	}
	scopedPluginDatasourceProvider := datasource.ProvideDefaultPluginConfigs(service20, cacheServiceImpl, plugincontextProvider)
	v := builder.ProvideDefaultBuildHandlerChainFuncFromBuilders()
	aggregatorRunner, err := aggregatorrunner.ProvideKubernetesAggregatorConfigurator(cfg, httpclientProvider, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	apiserverService, err := apiserver.ProvideService(cfg, featureToggles, routeRegisterImpl, tracingService, serverLockService, sqlStore, kvStore, middlewareHandler, scopedPluginDatasourceProvider, plugincontextProvider, pluginstoreService, dualwriteService, resourceClient, eventualRestConfigProvider, v, eventualRestConfigProvider, registerer, aggregatorRunner)
	if err != nil {
		return nil, err
	}
	sandboxSettingsAPIBuilder := sandboxsettings.RegisterAPIService(featureToggles, apiserverService, licenseTokenService, accessControl, cfg)
	advisorService, err := advisor.ProvideService(cfg, eventualRestConfigProvider)
	if err != nil {
		return nil, err
	}
	statscollectorService := statscollector.ProvideService(usageStats, validatorService, statsService, cfg, sqlStore, socialService, pluginstoreService, featureManager, service20, httpclientProvider, sandboxSettingsAPIBuilder, advisorService)
	internalMetricsService, err := metrics.ProvideService(cfg, registerer, gatherer)
	if err != nil {
		return nil, err
	}
	supportbundlesimplService, err := supportbundlesimpl.ProvideService(accessControl, acimplService, bundleregistryService, cfg, featureToggles, httpServer, kvStore, service18, pluginstoreService, routeRegisterImpl, implementation, sqlStore, usageStats, tracingService)
	if err != nil {
		return nil, err
	}
	metricService, err := metric.ProvideService(publicDashboardStoreImpl, registerer)
	if err != nil {
		return nil, err
	}
	pluginexternalService, err := pluginexternal.ProvideService(cfg, pluginstoreService)
	if err != nil {
		return nil, err
	}
	plugininstallerService, err := plugininstaller.ProvideService(cfg, pluginstoreService, managedPluginInstaller, registerer, repoManager, featureToggles, plugincheckerService)
	if err != nil {
		return nil, err
	}
	zanzanaReconciler := dualwrite2.ProvideZanzanaReconciler(cfg, featureToggles, client, sqlStore, serverLockService, folderimplService)
	playlistAppProvider := playlist.RegisterApp(playlistService, cfg, featureToggles)
	investigationsAppProvider := investigations.RegisterApp(cfg)
	checkregistryService := checkregistry.ProvideService(service20, pluginstoreService, plugincontextProvider, middlewareHandler, plugincheckerService, repoManager, preinstallImpl, managedPluginService, managedinstanceClient, ssosettingsimplService, cfg, pluginerrsStore)
	advisorAppProvider := advisor2.RegisterApp(checkregistryService, cfg)
	alertingNotificationsAppProvider := notifications2.RegisterApp(cfg, alertNG)
	appregistryService, err := appregistry.ProvideRegistryServiceSink(apiserverService, eventualRestConfigProvider, featureToggles, playlistAppProvider, investigationsAppProvider, advisorAppProvider, alertingNotificationsAppProvider, cfg)
	if err != nil {
		return nil, err
	}
	importDashboardService := service12.ProvideService(routeRegisterImpl, quotaService, service19, pluginstoreService, libraryPanelService, dashboardService, accessControl, folderimplService, featureToggles)
	dashboardUpdater := service8.ProvideDashboardUpdater(inProcBus, pluginstoreService, service19, importDashboardService, service18, pluginService, dashboardService)
	sanitizerProvider := sanitizer.ProvideService(renderingService)
	healthService, err := grpcserver.ProvideHealthService(cfg, grpcserverProvider)
	if err != nil {
		return nil, err
	}
	reflectionService, err := grpcserver.ProvideReflectionService(cfg, grpcserverProvider)
	if err != nil {
		return nil, err
	}
	databaseImplementation := database9.ProvideService(sqlStore, teamService)
	ldapImpl := service13.ProvideService(cfg, featureToggles, ssosettingsimplService)
	identitySynchronizer := authnimpl.ProvideIdentitySynchronizer(authnimplService)
	ldapSync, err := ldapsync.ProvideLDAPSync(cfg, serverLockService, enterpriseUserAuthTokenService, licenseTokenService, usageStats, userService, ldapImpl, identitySynchronizer)
	if err != nil {
		return nil, err
	}
	debug, err := ldapdebug.ProvideDebug(databaseImplementation, ldapSync, cfg, routeRegisterImpl, licenseTokenService, accessControl)
	if err != nil {
		return nil, err
	}
	apiService := api4.ProvideService(cfg, routeRegisterImpl, accessControl, userService, authinfoimplService, debug, identitySynchronizer, orgService, ldapImpl, enterpriseUserAuthTokenService, bundleregistryService)
	dashboardsAPIBuilder := dashboard.RegisterAPIService(cfg, featureToggles, apiserverService, dashboardService, dashboardProvisioningService, service20, dashboardServiceImpl, accessControl, accessClient, enterpriseProvisioningServiceImpl, dashboardsStore, registerer, sqlStore, tracingService, resourceClient, dualwriteService, sortService, quotaService, dashboardFolderStoreImpl, libraryPanelService, eventualRestConfigProvider, userService)
	snapshotsAPIBuilder := dashboardsnapshot.RegisterAPIService(serviceImpl, apiserverService, cfg, featureToggles, sqlStore, registerer)
	featureFlagAPIBuilder := featuretoggle.RegisterAPIService(featureManager, accessControl, apiserverService, cfg, registerer)
	dataSourceAPIBuilder, err := datasource.RegisterAPIService(featureToggles, apiserverService, middlewareHandler, scopedPluginDatasourceProvider, plugincontextProvider, pluginstoreService, accessControl, registerer)
	if err != nil {
		return nil, err
	}
	folderAPIBuilder := folders.RegisterAPIService(cfg, featureToggles, apiserverService, folderimplService, folderPermissionsService, accessControl, acimplService, registerer, resourceClient)
	coreRoleSqlBackend := corerole.ProvideStorageBackend(legacyDatabaseProvider, licenseTokenService)
	identityAccessManagementAPIBuilder, err := iam.RegisterAPIService(featureToggles, apiserverService, ssosettingsimplService, sqlStore, accessControl, accessClient, registerer, coreRoleSqlBackend)
	if err != nil {
		return nil, err
	}
	legacyDataSourceLookup := service9.ProvideLegacyDataSourceLookup(service20)
	queryAPIBuilder, err := query2.RegisterAPIService(featureToggles, apiserverService, service20, pluginstoreService, accessControl, middlewareHandler, plugincontextProvider, registerer, tracingService, legacyDataSourceLookup, exprService)
	if err != nil {
		return nil, err
	}
	userStorageAPIBuilder := userstorage.RegisterAPIService(featureToggles, apiserverService, registerer)
	factory := github.ProvideFactory()
	legacyMigrator := legacy.ProvideLegacyMigrator(sqlStore, enterpriseProvisioningServiceImpl, libraryPanelService, accessControl)
	webhookExtraBuilder := webhooks.ProvideWebhooks(cfg, featureToggles, secretsService, factory, renderingService, resourceClient, eventualRestConfigProvider)
	v2 := apiregistry.MergeProvisioningExtras(webhookExtraBuilder)
	apiBuilder, err := provisioning2.RegisterAPIService(cfg, featureToggles, apiserverService, registerer, resourceClient, eventualRestConfigProvider, factory, accessClient, legacyMigrator, dualwriteService, usageStats, secretsService, tracingService, v2)
	if err != nil {
		return nil, err
	}
	ofrepAPIBuilder, err := ofrep.RegisterAPIService(apiserverService, cfg)
	if err != nil {
		return nil, err
	}
	secretDBMigrator := migrator3.NewWithEngine(sqlStore)
	dependencyRegisterer, err := secret.RegisterDependencies(featureToggles, cfg, secretDBMigrator, acimplService)
	if err != nil {
		return nil, err
	}
	apiregistryService := apiregistry.ProvideRegistryServiceSink(dashboardsAPIBuilder, snapshotsAPIBuilder, featureFlagAPIBuilder, dataSourceAPIBuilder, folderAPIBuilder, identityAccessManagementAPIBuilder, queryAPIBuilder, userStorageAPIBuilder, apiBuilder, ofrepAPIBuilder, dependencyRegisterer)
	teamPermissionsService, err := ossaccesscontrol.ProvideTeamPermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, licenseTokenService, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	teamAPI := teamapi.ProvideTeamAPI(routeRegisterImpl, teamService, acimplService, accessControl, teamPermissionsService, userService, licenseTokenService, cfg, prefService, dashboardService, featureToggles)
	cloudmigrationService, err := cloudmigrationimpl.ProvideService(cfg, httpclientProvider, featureToggles, sqlStore, service20, secretsKVStore, secretsService, routeRegisterImpl, registerer, tracingService, dashboardService, folderimplService, pluginstoreService, service18, accessControl, acimplService, kvStore, libraryElementService, alertNG)
	if err != nil {
		return nil, err
	}
	authService, err := jwt.ProvideService(cfg, remoteCache)
	if err != nil {
		return nil, err
	}
	userProtectionService, err := userprotection.ProvideService(cfg, loginStore, orgService)
	if err != nil {
		return nil, err
	}
	registration := authnimpl.ProvideRegistration(cfg, authnService, orgService, enterpriseUserAuthTokenService, acimplService, permissionRegistry, apikeyService, userService, authService, userProtectionService, loginattemptimplService, quotaService, authinfoimplService, renderingService, featureToggles, oauthtokenService, socialService, remoteCache, ldapImpl, implementation, tracingService, tempuserService, notificationService)
	backgroundServiceRegistry := backgroundsvcs.ProvideBackgroundServiceRegistry(httpServer, alertNG, cleanUpService, grafanaLive, gateway, notificationService, pluginstoreService, renderingService, enterpriseUserAuthTokenService, tracingService, provisioningServiceImpl, usageStats, statscollectorService, grafanaService, pluginsService, internalMetricsService, secretsService, remoteCache, storageService, searchService, entityEventsService, serviceAccountsService, grpcserverProvider, secretMigrationProviderImpl, loginattemptimplService, supportbundlesimplService, metricService, keyRetriever, angulardetectorsproviderDynamic, apiserverService, anonDeviceService, ssosettingsimplService, pluginexternalService, plugininstallerService, zanzanaReconciler, appregistryService, dashboardUpdater, dashboardServiceImpl, serviceImpl, serviceAccountsProxy, sanitizerProvider, healthService, reflectionService, apiService, apiregistryService, idimplService, teamAPI, ssosettingsimplService, cloudmigrationService, registration)
	datasourcesDatabase, err := database10.ProvideDatasourcesDatabase(sqlStore)
	if err != nil {
		return nil, err
	}
	dataSources, err := datasources.ProvideService(sqlStore, licenseTokenService, cfg, routeRegisterImpl, usageStats, validatorService, accessControl, datasourcesDatabase)
	if err != nil {
		return nil, err
	}
	summariesDatabase, err := database11.ProvideSummariesDatabase(sqlStore, serverLockService)
	if err != nil {
		return nil, err
	}
	summariesAPI := api5.ProvideSummariesAPI(licenseTokenService, routeRegisterImpl, dashboardService, summariesDatabase, accessControl, cfg)
	summariesSummaries, err := summaries.ProvideService(cfg, summariesDatabase, summariesAPI, dashboardService, orgService)
	if err != nil {
		return nil, err
	}
	viewsDatabase, err := database12.ProvideViewsDatabase(cfg, sqlStore)
	if err != nil {
		return nil, err
	}
	viewsAPI := api6.ProvideViewsAPI(cfg, accessControl, routeRegisterImpl, licenseTokenService, viewsDatabase, avatarCacheServer, dashboardService, userService)
	views := service14.ProvideService(viewsDatabase, viewsAPI)
	meta, err := analytics.ProvideService(routeRegisterImpl, cfg, licenseTokenService, dataSources, summariesSummaries, views, acimplService, publicDashboardServiceImpl)
	if err != nil {
		return nil, err
	}
	auditingAuditing := auditing.ProvideAuditing(cfg, enterpriseUserAuthTokenService, httpServer, licenseTokenService, userService, authnService, registerer, usageStats)
	senderService := sender.ProvideSenderService(cfg, licenseTokenService, renderService, notificationService, reportDatabase, featureToggles)
	schedulerScheduler := scheduler.ProvideScheduler(serverLockService, reportDatabase, senderService, dashboardService)
	reportService := service15.ProvideReportService(accessControl, reportDatabase, schedulerScheduler, dashboardService)
	reportAPI := api7.ProvideReportAPI(accessControl, httpServer, routeRegisterImpl, cfg, licenseTokenService, renderService, senderService, reportService, brandingStorage)
	reportReport, err := report.ProvideReport(accessControl, hooksService, cfg, licenseTokenService, usageStats, featureToggles, reportDatabase, renderService, senderService, schedulerScheduler, reportAPI)
	if err != nil {
		return nil, err
	}
	renewalService, err := service2.ProvideRenewalService(cfg, licenseTokenService, usageStats, anonDeviceService)
	if err != nil {
		return nil, err
	}
	keyStore, err := vault.ProvideVaultKeyStore(cfg, licenseTokenService, usageStats)
	if err != nil {
		return nil, err
	}
	recordedqueriesService, err := recordedqueries.ProvideService(cfg, licenseTokenService, routeRegisterImpl, inProcBus, sqlStore, cacheServiceImpl, guardianProvider, httpclientProvider, middlewareHandler, hooksService, exprService, usageStats, service20, featureToggles, plugincontextProvider, tracingService)
	if err != nil {
		return nil, err
	}
	cdnService := cdn.ProvideService(pluginManagementCfg, loaderLoader, pluginscdnService)
	enterprisePublicDashboardsMetricServiceImpl, err := metric2.ProvideService(enterprisePublicDashboardStoreImpl, featureToggles, licenseTokenService, registerer)
	if err != nil {
		return nil, err
	}
	remoterulerService, err := remoteruler.ProvideService(cfg, dBstore, grpcserverProvider, featureToggles, cacheServiceImpl, exprService, alertNG, accessControl, repositoryImpl, dashboardService, tracingService, registerer, inProcBus)
	if err != nil {
		return nil, err
	}
	alertenrichmentService, err := alertenrichment.ProvideService(cfg, featureToggles, eventualRestConfigProvider, registerer, tracingService)
	if err != nil {
		return nil, err
	}
	licensingAPI, err := api8.ProvideLicensingAPI(cfg, renewalService, licenseTokenService, hooksService, routeRegisterImpl, accessControl, featureToggles, acimplService, acimplService, httpServer)
	if err != nil {
		return nil, err
	}
	sortOptions, err := sortoptions.ProvideSortOptions(searchSearchService, licenseTokenService, cfg)
	if err != nil {
		return nil, err
	}
	whiteLabeling, err := whitelabeling.ProvideWhiteLabeling(cfg, hooksService, licenseTokenService, usageStats)
	if err != nil {
		return nil, err
	}
	teamSync := teamgroupsync.ProvideTeamSync(routeRegisterImpl, databaseImplementation, licenseTokenService, accessControl, teamPermissionsService, orgService, authnService, teamService)
	groupSyncSQLStore := groupsync.ProvideStore(sqlStore)
	groupSyncSvc := groupsync.ProvideService(groupSyncSQLStore, accessControlStore, acimplService)
	groupSyncRBACSvc := groupsync.ProvideRBACService(accessControlStore)
	groupSync := groupsync.ProvideGroupSync(featureToggles, routeRegisterImpl, groupSyncSvc, licenseTokenService, accessControl, groupSyncRBACSvc, orgService, authnService, tracingService, registerer, usageStats)
	httpRateLimiting, err := ratelimiting.ProvideHTTPRateLimiting(cfg, httpServer)
	if err != nil {
		return nil, err
	}
	samlAuth := saml.ProvideAuth(enterpriseUserAuthTokenService, routeRegisterImpl, implementation, cfg, cacheService, licenseTokenService, httpServer, usageStats, auditingAuditing, authinfoimplService, secretsService, orgService, bundleregistryService, featureToggles, authnService, userService, ssosettingsimplService, enterpriseUserAuthTokenService, orgRoleMapper, tracer)
	billingBilling, err := billing.ProvideBilling(auditingAuditing, licenseTokenService, anonDeviceService, sqlStore, authnService)
	if err != nil {
		return nil, err
	}
	searchV2Service, err := searchV2_2.ProvideService(summariesDatabase, searchService)
	if err != nil {
		return nil, err
	}
	api10, err := api9.ProvideApi(httpServer, enterprisePublicDashboardsServiceImpl, routeRegisterImpl, featureToggles, licenseTokenService, accessControl, publicDashboardServiceImpl, enterprisePublicDashboardsMetricServiceImpl, pubdashEmailSharingMiddleware)
	if err != nil {
		return nil, err
	}
	teamLBAC := teamlbac.ProvideTeamLBAC(cfg, routeRegisterImpl, service20, accessControl, teamService, usageStats, featureManager)
	reportingAPIBuilder := reporting.RegisterAPIService(featureToggles, apiserverService, cfg, accessControl, reportDatabase)
	bannersAPIBuilder := banners.RegisterAPIService(featureToggles, apiserverService, licenseTokenService, accessControl)
	scimAPIBuilder := scim.RegisterAPIService(featureToggles, cfg, apiserverService, orgService, quotaService, userService, teamService, licenseTokenService, authinfoimplService, sqlStore, teamPermissionsService, eventualRestConfigProvider, resourceClient, dualwriteService, sortService, usageStats)
	usageInsightsAPIBuilder := usageinsights.RegisterAPIService(featureToggles, apiserverService, accessControl, sqlStore, tracingService)
	queryLibraryAPIBuilder := querylibrary.RegisterAPIService(featureToggles, apiserverService, registerer)
	scopeAPIBuilder := scope.RegisterAPIService(featureToggles, apiserverService, registerer)
	alertEnrichmentAPIBuilder := alertenrichment2.RegisterAPIService(featureToggles, cfg, apiserverService, licenseTokenService, accessControl)
	databaseDatabase := database13.ProvideDatabase(sqlStore, tracer)
	secureValueMetadataStorage, err := metadata.ProvideSecureValueMetadataStorage(databaseDatabase, tracer, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	keeperMetadataStorage, err := metadata.ProvideKeeperMetadataStorage(databaseDatabase, tracer, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	encryptedValueStorage, err := encryption2.ProvideEncryptedValueStorage(databaseDatabase, tracer, featureToggles)
	if err != nil {
		return nil, err
	}
	dataKeyStorage, err := encryption2.ProvideDataKeyStorage(databaseDatabase, tracer, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	providerMap := encryption3.ProvideThirdPartyProviderMap()
	encryptionManager, err := manager5.ProvideEncryptionManager(tracer, dataKeyStorage, cfg, usageStats, providerMap)
	if err != nil {
		return nil, err
	}
	ossKeeperService, err := secretkeeper.ProvideService(tracer, encryptedValueStorage, encryptionManager, registerer)
	if err != nil {
		return nil, err
	}
	enterpriseKeeperService, err := secretkeeper2.ProvideService(ossKeeperService)
	if err != nil {
		return nil, err
	}
	secureValueService := service16.ProvideSecureValueService(tracer, accessClient, databaseDatabase, secureValueMetadataStorage, keeperMetadataStorage, enterpriseKeeperService)
	secretAPIBuilder, err := secret2.RegisterAPIService(tracer, featureToggles, cfg, apiserverService, secureValueMetadataStorage, keeperMetadataStorage, secureValueService, databaseDatabase, enterpriseKeeperService, accessClient, encryptionManager)
	if err != nil {
		return nil, err
	}
	extapiregistryService := extapiregistry.ProvideRegistryServiceSink(reportingAPIBuilder, bannersAPIBuilder, sandboxSettingsAPIBuilder, scimAPIBuilder, usageInsightsAPIBuilder, queryLibraryAPIBuilder, scopeAPIBuilder, alertEnrichmentAPIBuilder, secretAPIBuilder)
	bannerSettings, err := bannersettings.ProvideBannerSettings(hooksService, licenseTokenService, featureToggles, accessControl)
	if err != nil {
		return nil, err
	}
	backgroundsvcsBackgroundServiceRegistry := backgroundsvcs2.ProvideBackgroundServiceRegistry(backgroundServiceRegistry, meta, summariesSummaries, cachingService, enterpriseProvisioningServiceImpl, auditingAuditing, reportReport, renderService, ldapSync, renewalService, licenseTokenService, keyStore, recordedqueriesService, cdnService, enterprisePublicDashboardsMetricServiceImpl, remoterulerService, alertenrichmentService, licensingAPI, sortOptions, whiteLabeling, teamSync, groupSync, httpRateLimiting, samlAuth, billingBilling, debug, disableUnsignedPlugins, providerService, searchV2Service, api10, teamLBAC, extapiregistryService, bannerSettings, usageinsightsService, storage)
	usageStatsProvidersRegistry := usagestatssvcs.ProvideUsageStatsProvidersRegistry(acimplService, userService)
	enterpriseusagestatssvcsUsageStatsProvidersRegistry := enterpriseusagestatssvcs.ProvideUsageStatsProvidersRegistry(usageStatsProvidersRegistry, accessControlStore)
	server, err := New(opts, cfg, httpServer, acimplService, enterpriseProvisioningServiceImpl, backgroundsvcsBackgroundServiceRegistry, enterpriseusagestatssvcsUsageStatsProvidersRegistry, statscollectorService, registerer)
	if err != nil {
		return nil, err
	}
	return server, nil
}

func InitializeForTest(t sqlutil.ITestDB, testingT interface {
	Cleanup(func())
	mock.TestingT
}, cfg *setting.Cfg, opts Options, apiOpts api.ServerOptions) (*TestEnv, error) {
	routeRegisterImpl := routing.ProvideRegister()
	tracingConfig, err := tracing.ProvideTracingConfig(cfg)
	if err != nil {
		return nil, err
	}
	tracingService, err := tracing.ProvideService(tracingConfig)
	if err != nil {
		return nil, err
	}
	inProcBus := bus.ProvideBus(tracingService)
	featureManager, err := featuremgmt.ProvideManagerService(cfg)
	if err != nil {
		return nil, err
	}
	featureToggles := featuremgmt.ProvideToggles(featureManager)
	ossMigrations := migrations.ProvideOSSMigrations(featureToggles)
	enterpriseMigrations := migrations2.ProvideEnterpriseMigrations(cfg, ossMigrations, featureToggles)
	sqlStore, err := sqlstore.ProvideServiceForTests(t, cfg, featureToggles, inProcBus, enterpriseMigrations)
	if err != nil {
		return nil, err
	}
	kvStore := kvstore.ProvideService(sqlStore)
	accessControl := acimpl.ProvideAccessControl(featureToggles)
	bundleregistryService := bundleregistry.ProvideService()
	usageStats, err := service.ProvideService(cfg, kvStore, routeRegisterImpl, tracingService, accessControl, bundleregistryService)
	if err != nil {
		return nil, err
	}
	secretsStoreImpl := database.ProvideSecretsStore(sqlStore)
	providerProvider := provider.ProvideEncryptionProvider()
	licensingStore, err := database2.ProvideStore(sqlStore)
	if err != nil {
		return nil, err
	}
	licenseTokenService, err := service2.ProvideLicenseTokenService(cfg, licensingStore)
	if err != nil {
		return nil, err
	}
	encryptionProvider := encryption.ProvideEncryptionProvider(providerProvider, licenseTokenService)
	serviceService, err := service3.ProvideEncryptionService(tracingService, encryptionProvider, usageStats, cfg)
	if err != nil {
		return nil, err
	}
	osskmsprovidersService := osskmsproviders.ProvideService(serviceService, cfg, featureToggles)
	keyProvidersService := kmsproviders.ProvideService(osskmsprovidersService, cfg, featureToggles, licenseTokenService)
	secretsService, err := manager.ProvideSecretsService(tracingService, secretsStoreImpl, keyProvidersService, serviceService, cfg, featureToggles, usageStats)
	if err != nil {
		return nil, err
	}
	remoteCache, err := remotecache.ProvideService(cfg, sqlStore, usageStats, secretsService)
	if err != nil {
		return nil, err
	}
	cacheService := localcache.ProvideService()
	quotaService := quotaimpl.ProvideService(sqlStore, cfg)
	orgService, err := orgimpl.ProvideService(sqlStore, cfg, quotaService)
	if err != nil {
		return nil, err
	}
	teamService, err := teamimpl.ProvideService(sqlStore, cfg, tracingService)
	if err != nil {
		return nil, err
	}
	userService, err := userimpl.ProvideService(sqlStore, orgService, cfg, teamService, cacheService, tracingService, quotaService, bundleregistryService)
	if err != nil {
		return nil, err
	}
	serverLockService := serverlock.ProvideService(sqlStore, tracingService)
	userAuthTokenService, err := authimpl.ProvideUserAuthTokenService(sqlStore, serverLockService, quotaService, secretsService, cfg, tracingService, featureToggles)
	if err != nil {
		return nil, err
	}
	enterpriseUserAuthTokenService := auth.ProvideService(sqlStore, licenseTokenService, usageStats, userAuthTokenService, userService, cfg)
	registerer := metrics.ProvideRegistererForTest()
	loginStore := authinfoimpl.ProvideStore(sqlStore, secretsService)
	authinfoimplService := authinfoimpl.ProvideService(loginStore, remoteCache, secretsService)
	authnimplService := authnimpl.ProvideService(cfg, tracingService, enterpriseUserAuthTokenService, usageStats, registerer, authinfoimplService)
	authnService := authnimpl.ProvideAuthnService(authnimplService)
	actionSetService := resourcepermissions.NewActionSetService()
	accessControlStore := database3.ProvideService(sqlStore, featureToggles, tracingService)
	permissionRegistry := permreg.ProvidePermissionRegistry()
	acimplService, err := acimpl2.ProvideService(cfg, routeRegisterImpl, licenseTokenService, cacheService, accessControl, sqlStore, userService, authnService, actionSetService, featureToggles, serverLockService, accessControlStore, tracingService, permissionRegistry)
	if err != nil {
		return nil, err
	}
	implementation, err := settingsprovider.ProvideService(cfg, featureToggles, sqlStore, routeRegisterImpl, secretsService, accessControl, acimplService)
	if err != nil {
		return nil, err
	}
	pluginManagementCfg, err := pluginconfig.ProvidePluginManagementConfig(cfg, implementation, featureToggles)
	if err != nil {
		return nil, err
	}
	pluginInstanceCfg, err := pluginconfig.ProvidePluginInstanceConfig(cfg, implementation, featureToggles)
	if err != nil {
		return nil, err
	}
	validLicense := licensingtest.ProvideValidLicense()
	licensingService := licensing.ProvideLicensing(cfg, validLicense)
	envVarsProvider := pluginconfig.NewEnvVarsProvider(pluginInstanceCfg, licensingService)
	inMemory := registry.ProvideService()
	rendererManager, err := renderer.ProvideService(pluginManagementCfg, envVarsProvider, inMemory, tracingService)
	if err != nil {
		return nil, err
	}
	renderingService, err := rendering.ProvideService(cfg, featureToggles, remoteCache, rendererManager)
	if err != nil {
		return nil, err
	}
	hooksService := hooks.ProvideService()
	urlValidator := requestinterceptor.ProvideURLValidator(cfg)
	requestInterceptor := requestinterceptor.ProvideService(cfg, urlValidator)
	sourcesService := sources.ProvideService(cfg, pluginManagementCfg)
	pluginscdnService := pluginscdn.ProvideService(pluginManagementCfg)
	service17 := sources2.ProvideService(sourcesService, pluginManagementCfg, pluginscdnService)
	discovery := pipeline.ProvideDiscoveryStage(pluginManagementCfg, inMemory)
	keystoreService := keystore.ProvideService(kvStore)
	keyRetriever := dynamic.ProvideService(cfg, keystoreService)
	keyretrieverService := keyretriever.ProvideService(keyRetriever)
	signatureSignature := signature.ProvideService(pluginManagementCfg, keyretrieverService)
	assetpathService := assetpath.ProvideService(pluginManagementCfg, pluginscdnService)
	bootstrap := pipeline.ProvideBootstrapStage(pluginManagementCfg, signatureSignature, assetpathService)
	unsignedPluginAuthorizer := signature.ProvideOSSAuthorizer(pluginManagementCfg)
	disableUnsignedPlugins := disableunsignedplugins.ProvideService(unsignedPluginAuthorizer)
	validation := signature.ProvideValidatorService(disableUnsignedPlugins)
	angularpatternsstoreService := angularpatternsstore.ProvideService(kvStore)
	angulardetectorsproviderDynamic, err := angulardetectorsprovider.ProvideDynamic(cfg, angularpatternsstoreService)
	if err != nil {
		return nil, err
	}
	angularinspectorService, err := angularinspector.ProvideService(angulardetectorsproviderDynamic)
	if err != nil {
		return nil, err
	}
	validate := pipeline.ProvideValidationStage(pluginManagementCfg, validation, angularinspectorService)
	httpclientProvider := httpclientprovider.New(cfg, urlValidator, tracingService)
	azuremonitorService := azuremonitor.ProvideService(httpclientProvider)
	cloudwatchService := cloudwatch.ProvideService()
	cloudmonitoringService := cloudmonitoring.ProvideService(httpclientProvider)
	elasticsearchService := elasticsearch.ProvideService(httpclientProvider)
	graphiteService := graphite.ProvideService(httpclientProvider, tracingService)
	influxdbService := influxdb.ProvideService(httpclientProvider, featureToggles)
	tracer := otelTracer()
	lokiService := loki.ProvideService(httpclientProvider, tracer)
	opentsdbService := opentsdb.ProvideService(httpclientProvider)
	prometheusService := prometheus.ProvideService(httpclientProvider)
	tempoService := tempo.ProvideService(httpclientProvider)
	testdatasourceService := testdatasource.ProvideService()
	postgresService := postgres.ProvideService(cfg)
	mysqlService := mysql.ProvideService()
	mssqlService := mssql.ProvideService(cfg)
	entityEventsService := store.ProvideEntityEventsService(cfg, sqlStore, featureToggles)
	folderStoreImpl := folderimpl.ProvideStore(sqlStore)
	tagimplService := tagimpl.ProvideService(sqlStore)
	dashboardsStore, err := database4.ProvideDashboardStore(sqlStore, cfg, featureToggles, tagimplService)
	if err != nil {
		return nil, err
	}
	dashboardFolderStoreImpl := folderimpl.ProvideDashboardFolderStore(sqlStore)
	publicDashboardStoreImpl := database5.ProvideStore(sqlStore, cfg, featureToggles)
	publicDashboardServiceWrapperImpl := service4.ProvideServiceWrapper(publicDashboardStoreImpl)
	enterprisePublicDashboardStoreImpl := database6.ProvideStore(sqlStore)
	servicePublicDashboardServiceWrapperImpl := service5.ProvidePublicDashboardsServiceWrapper(publicDashboardServiceWrapperImpl, enterprisePublicDashboardStoreImpl)
	apikeyService, err := apikeyimpl.ProvideService(sqlStore, cfg, quotaService)
	if err != nil {
		return nil, err
	}
	contextHandler := grpccontext.ProvideContextHandler(tracingService)
	authenticator := interceptors.ProvideAuthenticator(apikeyService, userService, acimplService, contextHandler)
	grpcserverProvider, err := grpcserver.ProvideService(cfg, featureToggles, authenticator, tracer, registerer)
	if err != nil {
		return nil, err
	}
	client, err := authz.ProvideZanzana(cfg, sqlStore, tracingService, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	eventualRestConfigProvider := apiserver.ProvideEventualRestConfigProvider()
	accessClient, err := authz.ProvideAuthZClient(cfg, featureToggles, grpcserverProvider, tracingService, registerer, sqlStore, acimplService, client, eventualRestConfigProvider)
	if err != nil {
		return nil, err
	}
	legacyDatabaseProvider := usageinsights.ProvideLegacyDatabaseProvider(sqlStore)
	legacySQLStore := usageinsights.ProvideLegacySQLStores(legacyDatabaseProvider)
	storage, err := usageinsights.ProvideStorage(legacySQLStore, tracingService)
	if err != nil {
		return nil, err
	}
	sprinklesMetrics := usageinsights2.ProvideSprinklesMetrics(registerer)
	usageinsightsService, err := usageinsights2.ProvideService(cfg, featureManager, storage, sprinklesMetrics)
	if err != nil {
		return nil, err
	}
	documentBuilderSupplier := search.ProvideDocumentBuilders(sqlStore, usageinsightsService)
	options := &unified.Options{
		Cfg:      cfg,
		Features: featureToggles,
		DB:       sqlStore,
		Tracer:   tracingService,
		Reg:      registerer,
		Authzc:   accessClient,
		Docs:     documentBuilderSupplier,
	}
	storageMetrics := resource.ProvideStorageMetrics(registerer)
	bleveIndexMetrics := resource.ProvideIndexMetrics(registerer)
	resourceClient, err := unified2.ProvideUnifiedStorageClient(options, storageMetrics, bleveIndexMetrics)
	if err != nil {
		return nil, err
	}
	dualwriteService := dualwrite.ProvideService(featureToggles, registerer, kvStore, cfg)
	sortService := sort.ProvideService()
	folderimplService := folderimpl.ProvideService(folderStoreImpl, accessControl, inProcBus, dashboardsStore, dashboardFolderStoreImpl, userService, sqlStore, featureToggles, bundleregistryService, servicePublicDashboardServiceWrapperImpl, cfg, registerer, tracer, resourceClient, dualwriteService, sortService, eventualRestConfigProvider)
	searchService := searchV2.ProvideService(cfg, sqlStore, entityEventsService, acimplService, tracingService, featureToggles, orgService, userService, folderimplService)
	systemUsers := store.ProvideSystemUsersService()
	storageService, err := store.ProvideService(sqlStore, featureToggles, cfg, quotaService, systemUsers)
	if err != nil {
		return nil, err
	}
	grafanadsService := grafanads.ProvideService(searchService, storageService, featureToggles)
	pyroscopeService := pyroscope.ProvideService(httpclientProvider)
	parcaService := parca.ProvideService(httpclientProvider)
	zipkinService := zipkin.ProvideService(httpclientProvider)
	jaegerService := jaeger.ProvideService(httpclientProvider)
	corepluginRegistry := coreplugin.ProvideCoreRegistry(tracingService, azuremonitorService, cloudwatchService, cloudmonitoringService, elasticsearchService, graphiteService, influxdbService, lokiService, opentsdbService, prometheusService, tempoService, testdatasourceService, postgresService, mysqlService, mssqlService, grafanadsService, pyroscopeService, parcaService, zipkinService, jaegerService)
	providerService := provider2.ProvideService(cfg, corepluginRegistry, licenseTokenService)
	processService := process.ProvideService()
	retrieverService := retriever.ProvideService(sqlStore, apikeyService, kvStore, userService, orgService)
	serviceAccountPermissionsService, err := ossaccesscontrol.ProvideServiceAccountPermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, validLicense, retrieverService, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	serviceAccountsService, err := manager2.ProvideServiceAccountsService(cfg, usageStats, sqlStore, apikeyService, kvStore, userService, orgService, acimplService, serviceAccountPermissionsService, serverLockService)
	if err != nil {
		return nil, err
	}
	extSvcAccountsService := extsvcaccounts.ProvideExtSvcAccountsService(acimplService, cfg, inProcBus, sqlStore, featureToggles, registerer, serviceAccountsService, secretsService, tracingService)
	registryRegistry := registry2.ProvideExtSvcRegistry(cfg, extSvcAccountsService, serverLockService, featureToggles)
	service18 := service6.ProvideService(sqlStore, secretsService)
	serviceregistrationService := serviceregistration.ProvideService(cfg, featureToggles, registryRegistry, service18)
	initialize := pipeline.ProvideInitializationStage(pluginManagementCfg, inMemory, providerService, processService, serviceregistrationService, acimplService, actionSetService, envVarsProvider, tracingService)
	terminate, err := pipeline.ProvideTerminationStage(pluginManagementCfg, inMemory, processService)
	if err != nil {
		return nil, err
	}
	errorRegistry := pluginerrs.ProvideErrorTracker()
	loaderLoader := loader.ProvideService(pluginManagementCfg, discovery, bootstrap, validate, initialize, terminate, errorRegistry)
	pluginstoreService, err := pluginstore.ProvideService(inMemory, service17, loaderLoader)
	if err != nil {
		return nil, err
	}
	filestoreService := filestore.ProvideService(inMemory)
	fileStoreManager := dashboards.ProvideFileStoreManager(pluginstoreService, filestoreService)
	folderPermissionsService, err := ossaccesscontrol.ProvideFolderPermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, validLicense, folderimplService, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	dashboardServiceImpl, err := service7.ProvideDashboardServiceImpl(cfg, dashboardsStore, dashboardFolderStoreImpl, featureToggles, folderPermissionsService, accessControl, acimplService, folderimplService, registerer, eventualRestConfigProvider, userService, quotaService, orgService, servicePublicDashboardServiceWrapperImpl, resourceClient, dualwriteService, sortService, serverLockService, kvStore)
	if err != nil {
		return nil, err
	}
	pluginService := service7.ProvideDashboardPluginService(featureToggles, dashboardServiceImpl)
	service19 := service8.ProvideService(fileStoreManager, pluginService)
	oauthtokentestService := oauthtokentest.ProvideService()
	configStorage := config.ProvideStorage(cfg, cacheService, sqlStore)
	guardianProvider := guardian.ProvideGuardian(sqlStore, accessControl, licenseTokenService)
	cachingService, err := caching.ProvideService(cfg, configStorage, hooksService, licenseTokenService, routeRegisterImpl, guardianProvider, accessControl, acimplService, cacheService, featureToggles)
	if err != nil {
		return nil, err
	}
	middlewareHandler, err := pluginsintegration.ProvideEnterpriseClientWithMiddlewares(cfg, inMemory, oauthtokentestService, tracingService, cachingService, featureToggles, registerer, teamService)
	if err != nil {
		return nil, err
	}
	pluginerrsStore := pluginerrs.ProvideStore(errorRegistry)
	repoManager, err := repo.ProvideService(pluginManagementCfg)
	if err != nil {
		return nil, err
	}
	pluginInstaller := manager3.ProvideInstaller(pluginManagementCfg, inMemory, loaderLoader, repoManager, serviceregistrationService)
	managedPluginInstaller, err := managedinstance.ProvideInstaller(cfg, repoManager, pluginInstaller, routeRegisterImpl)
	if err != nil {
		return nil, err
	}
	cacheServiceImpl := service9.ProvideCacheService(cacheService, sqlStore, guardianProvider)
	shortURLService := shorturlimpl.ProvideService(sqlStore)
	queryHistoryService := queryhistory.ProvideService(cfg, sqlStore, routeRegisterImpl, accessControl)
	dashboardService := service7.ProvideDashboardService(featureToggles, dashboardServiceImpl)
	dashverService := dashverimpl.ProvideService(cfg, sqlStore, dashboardService, dashboardsStore, featureToggles, eventualRestConfigProvider, userService, resourceClient, dualwriteService, sortService)
	dashboardSnapshotStore := database7.ProvideStore(sqlStore, cfg)
	serviceImpl := service10.ProvideService(dashboardSnapshotStore, secretsService, dashboardService)
	dBstore, err := store2.ProvideDBStore(cfg, featureToggles, sqlStore, folderimplService, dashboardService, accessControl, inProcBus)
	if err != nil {
		return nil, err
	}
	deleteExpiredService := image.ProvideDeleteExpiredService(dBstore)
	tempuserService := tempuserimpl.ProvideService(sqlStore, cfg)
	cleanupServiceImpl := annotationsimpl.ProvideCleanupService(sqlStore, cfg)
	cleanUpService := cleanup.ProvideService(cfg, serverLockService, shortURLService, sqlStore, queryHistoryService, dashverService, serviceImpl, deleteExpiredService, tempuserService, tracingService, cleanupServiceImpl, dashboardService, dBstore)
	secretsKVStore, err := kvstore2.ProvideService(sqlStore, secretsService)
	if err != nil {
		return nil, err
	}
	datasourcePermissionsService, err := accesscontrol.ProvideDatasourcePermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, licenseTokenService, accessControl, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	requestConfigProvider := pluginconfig.NewRequestConfigProvider(pluginInstanceCfg)
	baseProvider := plugincontext.ProvideBaseService(cfg, requestConfigProvider)
	service20, err := service9.ProvideService(sqlStore, secretsService, secretsKVStore, cfg, featureToggles, accessControl, datasourcePermissionsService, quotaService, pluginstoreService, middlewareHandler, baseProvider)
	if err != nil {
		return nil, err
	}
	correlationsService, err := correlations.ProvideService(sqlStore, routeRegisterImpl, service20, accessControl, inProcBus, quotaService, cfg)
	if err != nil {
		return nil, err
	}
	accessControlProvisionerImpl := provisioner.ProvideService(cfg, featureToggles, licenseTokenService, sqlStore, acimplService, teamService, tracingService)
	mailer, err := notifications.ProvideSmtpService(cfg)
	if err != nil {
		return nil, err
	}
	notificationService, err := notifications.ProvideService(inProcBus, cfg, mailer, tempuserService)
	if err != nil {
		return nil, err
	}
	dashboardProvisioningService := service7.ProvideDashboardProvisioningService(featureToggles, dashboardServiceImpl)
	receiverPermissionsService, err := ossaccesscontrol.ProvideReceiverPermissionsService(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, validLicense, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	provisioningServiceImpl, err := provisioning.ProvideService(accessControl, cfg, sqlStore, pluginstoreService, dBstore, serviceService, notificationService, dashboardProvisioningService, service20, correlationsService, dashboardService, folderimplService, service18, searchService, quotaService, secretsService, orgService, receiverPermissionsService, tracingService, dualwriteService)
	if err != nil {
		return nil, err
	}
	enterpriseProvisioningServiceImpl, err := service11.ProvideService(cfg, accessControl, licenseTokenService, routeRegisterImpl, accessControlProvisionerImpl, provisioningServiceImpl)
	if err != nil {
		return nil, err
	}
	orgRoleMapper := connectors.ProvideOrgRoleMapper(cfg, orgService)
	ssosettingsimplService := ssosettingsimpl.ProvideService(cfg, sqlStore, accessControl, routeRegisterImpl, featureToggles, secretsService, usageStats, registerer, implementation, validLicense)
	socialService := socialimpl.ProvideService(cfg, featureToggles, usageStats, bundleregistryService, remoteCache, orgRoleMapper, ssosettingsimplService)
	oauthtokenService := oauthtoken.ProvideService(socialService, authinfoimplService, cfg, registerer, serverLockService, tracingService, enterpriseUserAuthTokenService, featureToggles)
	dataSourceProxyService := datasourceproxy.ProvideService(cacheServiceImpl, requestInterceptor, pluginstoreService, cfg, httpclientProvider, oauthtokenService, service20, tracingService, secretsService, featureToggles)
	starService := starimpl.ProvideService(sqlStore)
	searchSearchService := search2.ProvideService(cfg, sqlStore, starService, dashboardService, folderimplService, featureToggles, sortService)
	plugincontextProvider := plugincontext.ProvideService(cfg, cacheService, pluginstoreService, cacheServiceImpl, service20, service18, requestConfigProvider)
	mtDatasourceClientBuilder := mtdsclient.NewNullMTDatasourceClientBuilder()
	exprService := expr.ProvideService(cfg, middlewareHandler, plugincontextProvider, featureToggles, registerer, tracingService, mtDatasourceClientBuilder)
	queryServiceImpl := query.ProvideService(cfg, cacheServiceImpl, exprService, requestInterceptor, middlewareHandler, plugincontextProvider, mtDatasourceClientBuilder)
	repositoryImpl := annotationsimpl.ProvideService(sqlStore, cfg, featureToggles, tagimplService, tracingService, dBstore, dashboardService, registerer)
	grafanaLive, err := live.ProvideService(plugincontextProvider, cfg, routeRegisterImpl, pluginstoreService, middlewareHandler, cacheService, cacheServiceImpl, sqlStore, secretsService, usageStats, queryServiceImpl, featureToggles, accessControl, dashboardService, repositoryImpl, orgService, eventualRestConfigProvider)
	if err != nil {
		return nil, err
	}
	gateway := pushhttp.ProvideService(cfg, grafanaLive)
	authnAuthenticator := authnimpl.ProvideAuthnServiceAuthenticateOnly(authnimplService)
	contexthandlerContextHandler := contexthandler.ProvideService(cfg, authnAuthenticator, featureToggles)
	logger := loggermw.Provide(cfg, featureToggles)
	notificationServiceMock := notifications.MockNotificationService()
	ngAlert := metrics2.ProvideServiceForTest()
	alertNG, err := ngalert.ProvideService(cfg, featureToggles, cacheServiceImpl, service20, routeRegisterImpl, sqlStore, kvStore, exprService, dataSourceProxyService, quotaService, secretsService, notificationServiceMock, ngAlert, folderimplService, accessControl, dashboardService, renderingService, inProcBus, acimplService, repositoryImpl, pluginstoreService, tracingService, dBstore, httpclientProvider, plugincontextProvider, receiverPermissionsService, userService)
	if err != nil {
		return nil, err
	}
	libraryElementService := libraryelements.ProvideService(cfg, sqlStore, routeRegisterImpl, folderimplService, featureToggles, accessControl, dashboardService, eventualRestConfigProvider, userService)
	libraryPanelService, err := librarypanels.ProvideService(cfg, sqlStore, routeRegisterImpl, libraryElementService, folderimplService)
	if err != nil {
		return nil, err
	}
	grafanaService, err := updatemanager.ProvideGrafanaService(cfg, tracingService)
	if err != nil {
		return nil, err
	}
	managedPluginService := remote.NewManagedPluginsService(cfg)
	managedinstanceClient, err := managedinstance.ProvideClient(cfg)
	if err != nil {
		return nil, err
	}
	preinstallImpl := pluginchecker.ProvidePreinstall(cfg)
	plugincheckerService := pluginchecker.ProvideService(managedPluginService, managedinstanceClient, preinstallImpl)
	pluginsService, err := updatemanager.ProvidePluginsService(cfg, pluginstoreService, managedPluginInstaller, tracingService, featureToggles, plugincheckerService)
	if err != nil {
		return nil, err
	}
	ossSearchUserFilter := filters.ProvideOSSSearchUserFilter()
	enterpriseSearchUserFilter := filters2.ProvideEnterpriseSearchUserFilter(ossSearchUserFilter)
	ossService := searchusers.ProvideUsersService(cfg, enterpriseSearchUserFilter, userService)
	enterpriseService := manager4.ProvideEnterpriseService(cfg, ossService, sqlStore)
	serviceAccountsProxy, err := proxy.ProvideServiceAccountsProxy(cfg, accessControl, acimplService, featureToggles, serviceAccountPermissionsService, serviceAccountsService, routeRegisterImpl)
	if err != nil {
		return nil, err
	}
	pluginassetsService := pluginassets.ProvideService(pluginManagementCfg, pluginscdnService, signatureSignature, pluginstoreService)
	avatarCacheServer := avatar.ProvideAvatarCacheServer(cfg)
	prefService := prefimpl.ProvideService(sqlStore, cfg)
	dashboardPermissionsService, err := ossaccesscontrol.ProvideDashboardPermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, validLicense, dashboardService, folderimplService, acimplService, teamService, userService, actionSetService, dashboardServiceImpl)
	if err != nil {
		return nil, err
	}
	csrfCSRF := csrf.ProvideCSRFFilter(cfg)
	playlistService := playlistimpl.ProvideService(sqlStore, tracingService)
	secretsMigrator := migrator.ProvideSecretsMigrator(serviceService, secretsService, sqlStore, implementation, featureToggles)
	migratorSecretsMigrator := migrator2.ProvideSecretsMigrator(secretsMigrator)
	dataSourceSecretMigrationService := migrations3.ProvideDataSourceMigrationService(service20, kvStore, featureToggles)
	secretMigrationProviderImpl := migrations3.ProvideSecretMigrationProvider(serverLockService, dataSourceSecretMigrationService)
	publicDashboardServiceImpl := service4.ProvideService(cfg, featureToggles, publicDashboardStoreImpl, queryServiceImpl, repositoryImpl, accessControl, servicePublicDashboardServiceWrapperImpl, dashboardService, validLicense)
	reportDatabase := database8.ProvideReportDatabase(sqlStore)
	brandingStorage := brandingstorage.ProvideBrandingStorage(storageService, systemUsers)
	renderService := render.ProvideRenderService(acimplService, cfg, renderingService, reportDatabase, prefService, dashboardService, libraryElementService, userService, brandingStorage, featureToggles)
	enterprisePublicDashboardsServiceImpl := service5.ProvideService(notificationServiceMock, renderService, enterprisePublicDashboardStoreImpl, publicDashboardServiceImpl, dashboardService)
	pubdashEmailSharingMiddleware := middleware.ProvideEmailSharingMiddleware(publicDashboardServiceImpl, enterprisePublicDashboardsServiceImpl, cfg, accessControl, licenseTokenService)
	apiApi := api2.ProvideApi(publicDashboardServiceImpl, routeRegisterImpl, accessControl, featureToggles, pubdashEmailSharingMiddleware, cfg, validLicense)
	loginattemptimplService := loginattemptimpl.ProvideService(sqlStore, cfg, serverLockService)
	deletionService, err := orgimpl.ProvideDeletionService(sqlStore, cfg, dashboardService, accessControl)
	if err != nil {
		return nil, err
	}
	navtreeService := navtreeimpl.ProvideService(cfg, accessControl, pluginstoreService, service18, starService, featureToggles, dashboardService, acimplService, kvStore, apikeyService, validLicense, authnService)
	searchHTTPService := searchV2.ProvideSearchHTTPService(searchService)
	statsService := statsimpl.ProvideService(cfg, sqlStore, dashboardService, folderimplService, orgService, featureToggles)
	gatherer := metrics.ProvideGathererForTest(registerer)
	apiAPI := api3.ProvideApi(starService, dashboardService)
	enterpriseAnonUserLimitValidator := anonymous.ProvideEnterpriseAnonUserLimitValidator(licenseTokenService)
	anonDeviceService := anonimpl.ProvideAnonymousDeviceService(usageStats, authnService, sqlStore, cfg, orgService, serverLockService, accessControl, routeRegisterImpl, enterpriseAnonUserLimitValidator)
	signingkeysimplService, err := signingkeysimpl.ProvideEmbeddedSigningKeysService(sqlStore, secretsService, remoteCache, routeRegisterImpl)
	if err != nil {
		return nil, err
	}
	localSigner, err := idimpl.ProvideLocalSigner(signingkeysimplService)
	if err != nil {
		return nil, err
	}
	externalSigner := idimpl2.ProvideSigner(implementation, localSigner)
	idimplService := idimpl.ProvideService(cfg, externalSigner, remoteCache, authnService, registerer, tracer)
	verifier := userimpl.ProvideVerifier(cfg, userService, tempuserService, notificationServiceMock, idimplService)
	httpServer, err := api.ProvideHTTPServer(apiOpts, cfg, routeRegisterImpl, inProcBus, renderingService, validLicense, hooksService, cacheService, sqlStore, requestInterceptor, pluginstoreService, service19, pluginstoreService, middlewareHandler, pluginerrsStore, managedPluginInstaller, implementation, cacheServiceImpl, enterpriseUserAuthTokenService, cleanUpService, shortURLService, queryHistoryService, correlationsService, remoteCache, enterpriseProvisioningServiceImpl, accessControl, dataSourceProxyService, searchSearchService, grafanaLive, gateway, plugincontextProvider, contexthandlerContextHandler, logger, featureToggles, alertNG, libraryPanelService, libraryElementService, quotaService, socialService, tracingService, serviceService, grafanaService, pluginsService, enterpriseService, service20, queryServiceImpl, filestoreService, serviceAccountsProxy, pluginassetsService, authinfoimplService, storageService, notificationServiceMock, dashboardService, dashboardProvisioningService, folderimplService, guardianProvider, serviceImpl, service18, avatarCacheServer, prefService, folderPermissionsService, dashboardPermissionsService, dashverService, starService, csrfCSRF, managedPluginService, playlistService, apikeyService, kvStore, migratorSecretsMigrator, secretsService, secretMigrationProviderImpl, secretsKVStore, apiApi, userService, tempuserService, loginattemptimplService, orgService, deletionService, teamService, acimplService, navtreeService, repositoryImpl, tagimplService, searchHTTPService, oauthtokentestService, statsService, authnService, pluginscdnService, gatherer, apiAPI, registerer, eventualRestConfigProvider, anonDeviceService, verifier, preinstallImpl)
	if err != nil {
		return nil, err
	}
	validatorService, err := validator.ProvideService(pluginstoreService)
	if err != nil {
		return nil, err
	}
	scopedPluginDatasourceProvider := datasource.ProvideDefaultPluginConfigs(service20, cacheServiceImpl, plugincontextProvider)
	v := builder.ProvideDefaultBuildHandlerChainFuncFromBuilders()
	aggregatorRunner, err := aggregatorrunner.ProvideKubernetesAggregatorConfigurator(cfg, httpclientProvider, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	apiserverService, err := apiserver.ProvideService(cfg, featureToggles, routeRegisterImpl, tracingService, serverLockService, sqlStore, kvStore, middlewareHandler, scopedPluginDatasourceProvider, plugincontextProvider, pluginstoreService, dualwriteService, resourceClient, eventualRestConfigProvider, v, eventualRestConfigProvider, registerer, aggregatorRunner)
	if err != nil {
		return nil, err
	}
	sandboxSettingsAPIBuilder := sandboxsettings.RegisterAPIService(featureToggles, apiserverService, licenseTokenService, accessControl, cfg)
	advisorService, err := advisor.ProvideService(cfg, eventualRestConfigProvider)
	if err != nil {
		return nil, err
	}
	statscollectorService := statscollector.ProvideService(usageStats, validatorService, statsService, cfg, sqlStore, socialService, pluginstoreService, featureManager, service20, httpclientProvider, sandboxSettingsAPIBuilder, advisorService)
	internalMetricsService, err := metrics.ProvideService(cfg, registerer, gatherer)
	if err != nil {
		return nil, err
	}
	supportbundlesimplService, err := supportbundlesimpl.ProvideService(accessControl, acimplService, bundleregistryService, cfg, featureToggles, httpServer, kvStore, service18, pluginstoreService, routeRegisterImpl, implementation, sqlStore, usageStats, tracingService)
	if err != nil {
		return nil, err
	}
	metricService, err := metric.ProvideService(publicDashboardStoreImpl, registerer)
	if err != nil {
		return nil, err
	}
	pluginexternalService, err := pluginexternal.ProvideService(cfg, pluginstoreService)
	if err != nil {
		return nil, err
	}
	plugininstallerService, err := plugininstaller.ProvideService(cfg, pluginstoreService, managedPluginInstaller, registerer, repoManager, featureToggles, plugincheckerService)
	if err != nil {
		return nil, err
	}
	zanzanaReconciler := dualwrite2.ProvideZanzanaReconciler(cfg, featureToggles, client, sqlStore, serverLockService, folderimplService)
	playlistAppProvider := playlist.RegisterApp(playlistService, cfg, featureToggles)
	investigationsAppProvider := investigations.RegisterApp(cfg)
	checkregistryService := checkregistry.ProvideService(service20, pluginstoreService, plugincontextProvider, middlewareHandler, plugincheckerService, repoManager, preinstallImpl, managedPluginService, managedinstanceClient, ssosettingsimplService, cfg, pluginerrsStore)
	advisorAppProvider := advisor2.RegisterApp(checkregistryService, cfg)
	alertingNotificationsAppProvider := notifications2.RegisterApp(cfg, alertNG)
	appregistryService, err := appregistry.ProvideRegistryServiceSink(apiserverService, eventualRestConfigProvider, featureToggles, playlistAppProvider, investigationsAppProvider, advisorAppProvider, alertingNotificationsAppProvider, cfg)
	if err != nil {
		return nil, err
	}
	importDashboardService := service12.ProvideService(routeRegisterImpl, quotaService, service19, pluginstoreService, libraryPanelService, dashboardService, accessControl, folderimplService, featureToggles)
	dashboardUpdater := service8.ProvideDashboardUpdater(inProcBus, pluginstoreService, service19, importDashboardService, service18, pluginService, dashboardService)
	sanitizerProvider := sanitizer.ProvideService(renderingService)
	healthService, err := grpcserver.ProvideHealthService(cfg, grpcserverProvider)
	if err != nil {
		return nil, err
	}
	reflectionService, err := grpcserver.ProvideReflectionService(cfg, grpcserverProvider)
	if err != nil {
		return nil, err
	}
	databaseImplementation := database9.ProvideService(sqlStore, teamService)
	ldapImpl := service13.ProvideService(cfg, featureToggles, ssosettingsimplService)
	identitySynchronizer := authnimpl.ProvideIdentitySynchronizer(authnimplService)
	ldapSync, err := ldapsync.ProvideLDAPSync(cfg, serverLockService, enterpriseUserAuthTokenService, licenseTokenService, usageStats, userService, ldapImpl, identitySynchronizer)
	if err != nil {
		return nil, err
	}
	debug, err := ldapdebug.ProvideDebug(databaseImplementation, ldapSync, cfg, routeRegisterImpl, licenseTokenService, accessControl)
	if err != nil {
		return nil, err
	}
	apiService := api4.ProvideService(cfg, routeRegisterImpl, accessControl, userService, authinfoimplService, debug, identitySynchronizer, orgService, ldapImpl, enterpriseUserAuthTokenService, bundleregistryService)
	dashboardsAPIBuilder := dashboard.RegisterAPIService(cfg, featureToggles, apiserverService, dashboardService, dashboardProvisioningService, service20, dashboardServiceImpl, accessControl, accessClient, enterpriseProvisioningServiceImpl, dashboardsStore, registerer, sqlStore, tracingService, resourceClient, dualwriteService, sortService, quotaService, dashboardFolderStoreImpl, libraryPanelService, eventualRestConfigProvider, userService)
	snapshotsAPIBuilder := dashboardsnapshot.RegisterAPIService(serviceImpl, apiserverService, cfg, featureToggles, sqlStore, registerer)
	featureFlagAPIBuilder := featuretoggle.RegisterAPIService(featureManager, accessControl, apiserverService, cfg, registerer)
	dataSourceAPIBuilder, err := datasource.RegisterAPIService(featureToggles, apiserverService, middlewareHandler, scopedPluginDatasourceProvider, plugincontextProvider, pluginstoreService, accessControl, registerer)
	if err != nil {
		return nil, err
	}
	folderAPIBuilder := folders.RegisterAPIService(cfg, featureToggles, apiserverService, folderimplService, folderPermissionsService, accessControl, acimplService, registerer, resourceClient)
	coreRoleSqlBackend := corerole.ProvideStorageBackend(legacyDatabaseProvider, licenseTokenService)
	identityAccessManagementAPIBuilder, err := iam.RegisterAPIService(featureToggles, apiserverService, ssosettingsimplService, sqlStore, accessControl, accessClient, registerer, coreRoleSqlBackend)
	if err != nil {
		return nil, err
	}
	legacyDataSourceLookup := service9.ProvideLegacyDataSourceLookup(service20)
	queryAPIBuilder, err := query2.RegisterAPIService(featureToggles, apiserverService, service20, pluginstoreService, accessControl, middlewareHandler, plugincontextProvider, registerer, tracingService, legacyDataSourceLookup, exprService)
	if err != nil {
		return nil, err
	}
	userStorageAPIBuilder := userstorage.RegisterAPIService(featureToggles, apiserverService, registerer)
	factory := github.ProvideFactory()
	legacyMigrator := legacy.ProvideLegacyMigrator(sqlStore, enterpriseProvisioningServiceImpl, libraryPanelService, accessControl)
	webhookExtraBuilder := webhooks.ProvideWebhooks(cfg, featureToggles, secretsService, factory, renderingService, resourceClient, eventualRestConfigProvider)
	v2 := apiregistry.MergeProvisioningExtras(webhookExtraBuilder)
	apiBuilder, err := provisioning2.RegisterAPIService(cfg, featureToggles, apiserverService, registerer, resourceClient, eventualRestConfigProvider, factory, accessClient, legacyMigrator, dualwriteService, usageStats, secretsService, tracingService, v2)
	if err != nil {
		return nil, err
	}
	ofrepAPIBuilder, err := ofrep.RegisterAPIService(apiserverService, cfg)
	if err != nil {
		return nil, err
	}
	secretDBMigrator := migrator3.NewWithEngine(sqlStore)
	dependencyRegisterer, err := secret.RegisterDependencies(featureToggles, cfg, secretDBMigrator, acimplService)
	if err != nil {
		return nil, err
	}
	apiregistryService := apiregistry.ProvideRegistryServiceSink(dashboardsAPIBuilder, snapshotsAPIBuilder, featureFlagAPIBuilder, dataSourceAPIBuilder, folderAPIBuilder, identityAccessManagementAPIBuilder, queryAPIBuilder, userStorageAPIBuilder, apiBuilder, ofrepAPIBuilder, dependencyRegisterer)
	teamPermissionsService, err := ossaccesscontrol.ProvideTeamPermissions(cfg, featureToggles, routeRegisterImpl, sqlStore, accessControl, validLicense, acimplService, teamService, userService, actionSetService)
	if err != nil {
		return nil, err
	}
	teamAPI := teamapi.ProvideTeamAPI(routeRegisterImpl, teamService, acimplService, accessControl, teamPermissionsService, userService, validLicense, cfg, prefService, dashboardService, featureToggles)
	cloudmigrationService, err := cloudmigrationimpl.ProvideService(cfg, httpclientProvider, featureToggles, sqlStore, service20, secretsKVStore, secretsService, routeRegisterImpl, registerer, tracingService, dashboardService, folderimplService, pluginstoreService, service18, accessControl, acimplService, kvStore, libraryElementService, alertNG)
	if err != nil {
		return nil, err
	}
	authService, err := jwt.ProvideService(cfg, remoteCache)
	if err != nil {
		return nil, err
	}
	userProtectionService, err := userprotection.ProvideService(cfg, loginStore, orgService)
	if err != nil {
		return nil, err
	}
	registration := authnimpl.ProvideRegistration(cfg, authnService, orgService, enterpriseUserAuthTokenService, acimplService, permissionRegistry, apikeyService, userService, authService, userProtectionService, loginattemptimplService, quotaService, authinfoimplService, renderingService, featureToggles, oauthtokentestService, socialService, remoteCache, ldapImpl, implementation, tracingService, tempuserService, notificationServiceMock)
	backgroundServiceRegistry := backgroundsvcs.ProvideBackgroundServiceRegistry(httpServer, alertNG, cleanUpService, grafanaLive, gateway, notificationService, pluginstoreService, renderingService, enterpriseUserAuthTokenService, tracingService, provisioningServiceImpl, usageStats, statscollectorService, grafanaService, pluginsService, internalMetricsService, secretsService, remoteCache, storageService, searchService, entityEventsService, serviceAccountsService, grpcserverProvider, secretMigrationProviderImpl, loginattemptimplService, supportbundlesimplService, metricService, keyRetriever, angulardetectorsproviderDynamic, apiserverService, anonDeviceService, ssosettingsimplService, pluginexternalService, plugininstallerService, zanzanaReconciler, appregistryService, dashboardUpdater, dashboardServiceImpl, serviceImpl, serviceAccountsProxy, sanitizerProvider, healthService, reflectionService, apiService, apiregistryService, idimplService, teamAPI, ssosettingsimplService, cloudmigrationService, registration)
	datasourcesDatabase, err := database10.ProvideDatasourcesDatabase(sqlStore)
	if err != nil {
		return nil, err
	}
	dataSources, err := datasources.ProvideService(sqlStore, licenseTokenService, cfg, routeRegisterImpl, usageStats, validatorService, accessControl, datasourcesDatabase)
	if err != nil {
		return nil, err
	}
	summariesDatabase, err := database11.ProvideSummariesDatabase(sqlStore, serverLockService)
	if err != nil {
		return nil, err
	}
	summariesAPI := api5.ProvideSummariesAPI(licenseTokenService, routeRegisterImpl, dashboardService, summariesDatabase, accessControl, cfg)
	summariesSummaries, err := summaries.ProvideService(cfg, summariesDatabase, summariesAPI, dashboardService, orgService)
	if err != nil {
		return nil, err
	}
	viewsDatabase, err := database12.ProvideViewsDatabase(cfg, sqlStore)
	if err != nil {
		return nil, err
	}
	viewsAPI := api6.ProvideViewsAPI(cfg, accessControl, routeRegisterImpl, licenseTokenService, viewsDatabase, avatarCacheServer, dashboardService, userService)
	views := service14.ProvideService(viewsDatabase, viewsAPI)
	meta, err := analytics.ProvideService(routeRegisterImpl, cfg, licenseTokenService, dataSources, summariesSummaries, views, acimplService, publicDashboardServiceImpl)
	if err != nil {
		return nil, err
	}
	auditingAuditing := auditing.ProvideAuditing(cfg, enterpriseUserAuthTokenService, httpServer, licenseTokenService, userService, authnService, registerer, usageStats)
	senderService := sender.ProvideSenderService(cfg, licenseTokenService, renderService, notificationServiceMock, reportDatabase, featureToggles)
	schedulerScheduler := scheduler.ProvideScheduler(serverLockService, reportDatabase, senderService, dashboardService)
	reportService := service15.ProvideReportService(accessControl, reportDatabase, schedulerScheduler, dashboardService)
	reportAPI := api7.ProvideReportAPI(accessControl, httpServer, routeRegisterImpl, cfg, licenseTokenService, renderService, senderService, reportService, brandingStorage)
	reportReport, err := report.ProvideReport(accessControl, hooksService, cfg, licenseTokenService, usageStats, featureToggles, reportDatabase, renderService, senderService, schedulerScheduler, reportAPI)
	if err != nil {
		return nil, err
	}
	renewalService, err := service2.ProvideRenewalService(cfg, licenseTokenService, usageStats, anonDeviceService)
	if err != nil {
		return nil, err
	}
	keyStore, err := vault.ProvideVaultKeyStore(cfg, licenseTokenService, usageStats)
	if err != nil {
		return nil, err
	}
	recordedqueriesService, err := recordedqueries.ProvideService(cfg, licenseTokenService, routeRegisterImpl, inProcBus, sqlStore, cacheServiceImpl, guardianProvider, httpclientProvider, middlewareHandler, hooksService, exprService, usageStats, service20, featureToggles, plugincontextProvider, tracingService)
	if err != nil {
		return nil, err
	}
	cdnService := cdn.ProvideService(pluginManagementCfg, loaderLoader, pluginscdnService)
	enterprisePublicDashboardsMetricServiceImpl, err := metric2.ProvideService(enterprisePublicDashboardStoreImpl, featureToggles, licenseTokenService, registerer)
	if err != nil {
		return nil, err
	}
	remoterulerService, err := remoteruler.ProvideService(cfg, dBstore, grpcserverProvider, featureToggles, cacheServiceImpl, exprService, alertNG, accessControl, repositoryImpl, dashboardService, tracingService, registerer, inProcBus)
	if err != nil {
		return nil, err
	}
	alertenrichmentService, err := alertenrichment.ProvideService(cfg, featureToggles, eventualRestConfigProvider, registerer, tracingService)
	if err != nil {
		return nil, err
	}
	licensingAPI, err := api8.ProvideLicensingAPI(cfg, renewalService, licenseTokenService, hooksService, routeRegisterImpl, accessControl, featureToggles, acimplService, acimplService, httpServer)
	if err != nil {
		return nil, err
	}
	sortOptions, err := sortoptions.ProvideSortOptions(searchSearchService, licenseTokenService, cfg)
	if err != nil {
		return nil, err
	}
	whiteLabeling, err := whitelabeling.ProvideWhiteLabeling(cfg, hooksService, licenseTokenService, usageStats)
	if err != nil {
		return nil, err
	}
	teamSync := teamgroupsync.ProvideTeamSync(routeRegisterImpl, databaseImplementation, licenseTokenService, accessControl, teamPermissionsService, orgService, authnService, teamService)
	groupSyncSQLStore := groupsync.ProvideStore(sqlStore)
	groupSyncSvc := groupsync.ProvideService(groupSyncSQLStore, accessControlStore, acimplService)
	groupSyncRBACSvc := groupsync.ProvideRBACService(accessControlStore)
	groupSync := groupsync.ProvideGroupSync(featureToggles, routeRegisterImpl, groupSyncSvc, licenseTokenService, accessControl, groupSyncRBACSvc, orgService, authnService, tracingService, registerer, usageStats)
	httpRateLimiting, err := ratelimiting.ProvideHTTPRateLimiting(cfg, httpServer)
	if err != nil {
		return nil, err
	}
	samlAuth := saml.ProvideAuth(enterpriseUserAuthTokenService, routeRegisterImpl, implementation, cfg, cacheService, licenseTokenService, httpServer, usageStats, auditingAuditing, authinfoimplService, secretsService, orgService, bundleregistryService, featureToggles, authnService, userService, ssosettingsimplService, enterpriseUserAuthTokenService, orgRoleMapper, tracer)
	billingBilling, err := billing.ProvideBilling(auditingAuditing, licenseTokenService, anonDeviceService, sqlStore, authnService)
	if err != nil {
		return nil, err
	}
	searchV2Service, err := searchV2_2.ProvideService(summariesDatabase, searchService)
	if err != nil {
		return nil, err
	}
	api10, err := api9.ProvideApi(httpServer, enterprisePublicDashboardsServiceImpl, routeRegisterImpl, featureToggles, licenseTokenService, accessControl, publicDashboardServiceImpl, enterprisePublicDashboardsMetricServiceImpl, pubdashEmailSharingMiddleware)
	if err != nil {
		return nil, err
	}
	teamLBAC := teamlbac.ProvideTeamLBAC(cfg, routeRegisterImpl, service20, accessControl, teamService, usageStats, featureManager)
	reportingAPIBuilder := reporting.RegisterAPIService(featureToggles, apiserverService, cfg, accessControl, reportDatabase)
	bannersAPIBuilder := banners.RegisterAPIService(featureToggles, apiserverService, licenseTokenService, accessControl)
	scimAPIBuilder := scim.RegisterAPIService(featureToggles, cfg, apiserverService, orgService, quotaService, userService, teamService, licenseTokenService, authinfoimplService, sqlStore, teamPermissionsService, eventualRestConfigProvider, resourceClient, dualwriteService, sortService, usageStats)
	usageInsightsAPIBuilder := usageinsights.RegisterAPIService(featureToggles, apiserverService, accessControl, sqlStore, tracingService)
	queryLibraryAPIBuilder := querylibrary.RegisterAPIService(featureToggles, apiserverService, registerer)
	scopeAPIBuilder := scope.RegisterAPIService(featureToggles, apiserverService, registerer)
	alertEnrichmentAPIBuilder := alertenrichment2.RegisterAPIService(featureToggles, cfg, apiserverService, licenseTokenService, accessControl)
	databaseDatabase := database13.ProvideDatabase(sqlStore, tracer)
	secureValueMetadataStorage, err := metadata.ProvideSecureValueMetadataStorage(databaseDatabase, tracer, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	keeperMetadataStorage, err := metadata.ProvideKeeperMetadataStorage(databaseDatabase, tracer, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	encryptedValueStorage, err := encryption2.ProvideEncryptedValueStorage(databaseDatabase, tracer, featureToggles)
	if err != nil {
		return nil, err
	}
	dataKeyStorage, err := encryption2.ProvideDataKeyStorage(databaseDatabase, tracer, featureToggles, registerer)
	if err != nil {
		return nil, err
	}
	providerMap := encryption3.ProvideThirdPartyProviderMap()
	encryptionManager, err := manager5.ProvideEncryptionManager(tracer, dataKeyStorage, cfg, usageStats, providerMap)
	if err != nil {
		return nil, err
	}
	ossKeeperService, err := secretkeeper.ProvideService(tracer, encryptedValueStorage, encryptionManager, registerer)
	if err != nil {
		return nil, err
	}
	enterpriseKeeperService, err := secretkeeper2.ProvideService(ossKeeperService)
	if err != nil {
		return nil, err
	}
	secureValueService := service16.ProvideSecureValueService(tracer, accessClient, databaseDatabase, secureValueMetadataStorage, keeperMetadataStorage, enterpriseKeeperService)
	secretAPIBuilder, err := secret2.RegisterAPIService(tracer, featureToggles, cfg, apiserverService, secureValueMetadataStorage, keeperMetadataStorage, secureValueService, databaseDatabase, enterpriseKeeperService, accessClient, encryptionManager)
	if err != nil {
		return nil, err
	}
	extapiregistryService := extapiregistry.ProvideRegistryServiceSink(reportingAPIBuilder, bannersAPIBuilder, sandboxSettingsAPIBuilder, scimAPIBuilder, usageInsightsAPIBuilder, queryLibraryAPIBuilder, scopeAPIBuilder, alertEnrichmentAPIBuilder, secretAPIBuilder)
	bannerSettings, err := bannersettings.ProvideBannerSettings(hooksService, licenseTokenService, featureToggles, accessControl)
	if err != nil {
		return nil, err
	}
	backgroundsvcsBackgroundServiceRegistry := backgroundsvcs2.ProvideBackgroundServiceRegistry(backgroundServiceRegistry, meta, summariesSummaries, cachingService, enterpriseProvisioningServiceImpl, auditingAuditing, reportReport, renderService, ldapSync, renewalService, licenseTokenService, keyStore, recordedqueriesService, cdnService, enterprisePublicDashboardsMetricServiceImpl, remoterulerService, alertenrichmentService, licensingAPI, sortOptions, whiteLabeling, teamSync, groupSync, httpRateLimiting, samlAuth, billingBilling, debug, disableUnsignedPlugins, providerService, searchV2Service, api10, teamLBAC, extapiregistryService, bannerSettings, usageinsightsService, storage)
	usageStatsProvidersRegistry := usagestatssvcs.ProvideUsageStatsProvidersRegistry(acimplService, userService)
	enterpriseusagestatssvcsUsageStatsProvidersRegistry := enterpriseusagestatssvcs.ProvideUsageStatsProvidersRegistry(usageStatsProvidersRegistry, accessControlStore)
	server, err := New(opts, cfg, httpServer, acimplService, enterpriseProvisioningServiceImpl, backgroundsvcsBackgroundServiceRegistry, enterpriseusagestatssvcsUsageStatsProvidersRegistry, statscollectorService, registerer)
	if err != nil {
		return nil, err
	}
	testEnv, err := ProvideTestEnv(testingT, server, sqlStore, cfg, notificationServiceMock, grpcserverProvider, inMemory, httpclientProvider, oauthtokentestService, featureToggles, resourceClient, idimplService, factory)
	if err != nil {
		return nil, err
	}
	return testEnv, nil
}

func InitializeForCLI(cfg *setting.Cfg) (Runner, error) {
	featureManager, err := featuremgmt.ProvideManagerService(cfg)
	if err != nil {
		return Runner{}, err
	}
	featureToggles := featuremgmt.ProvideToggles(featureManager)
	ossMigrations := migrations.ProvideOSSMigrations(featureToggles)
	enterpriseMigrations := migrations2.ProvideEnterpriseMigrations(cfg, ossMigrations, featureToggles)
	tracingConfig, err := tracing.ProvideTracingConfig(cfg)
	if err != nil {
		return Runner{}, err
	}
	tracingService, err := tracing.ProvideService(tracingConfig)
	if err != nil {
		return Runner{}, err
	}
	inProcBus := bus.ProvideBus(tracingService)
	sqlStore, err := sqlstore.ProvideService(cfg, featureToggles, enterpriseMigrations, inProcBus, tracingService)
	if err != nil {
		return Runner{}, err
	}
	routeRegisterImpl := routing.ProvideRegister()
	secretsStoreImpl := database.ProvideSecretsStore(sqlStore)
	providerProvider := provider.ProvideEncryptionProvider()
	licensingStore, err := database2.ProvideStore(sqlStore)
	if err != nil {
		return Runner{}, err
	}
	licenseTokenService, err := service2.ProvideLicenseTokenService(cfg, licensingStore)
	if err != nil {
		return Runner{}, err
	}
	encryptionProvider := encryption.ProvideEncryptionProvider(providerProvider, licenseTokenService)
	kvStore := kvstore.ProvideService(sqlStore)
	accessControl := acimpl.ProvideAccessControl(featureToggles)
	bundleregistryService := bundleregistry.ProvideService()
	usageStats, err := service.ProvideService(cfg, kvStore, routeRegisterImpl, tracingService, accessControl, bundleregistryService)
	if err != nil {
		return Runner{}, err
	}
	serviceService, err := service3.ProvideEncryptionService(tracingService, encryptionProvider, usageStats, cfg)
	if err != nil {
		return Runner{}, err
	}
	osskmsprovidersService := osskmsproviders.ProvideService(serviceService, cfg, featureToggles)
	keyProvidersService := kmsproviders.ProvideService(osskmsprovidersService, cfg, featureToggles, licenseTokenService)
	secretsService, err := manager.ProvideSecretsService(tracingService, secretsStoreImpl, keyProvidersService, serviceService, cfg, featureToggles, usageStats)
	if err != nil {
		return Runner{}, err
	}
	cacheService := localcache.ProvideService()
	quotaService := quotaimpl.ProvideService(sqlStore, cfg)
	orgService, err := orgimpl.ProvideService(sqlStore, cfg, quotaService)
	if err != nil {
		return Runner{}, err
	}
	teamService, err := teamimpl.ProvideService(sqlStore, cfg, tracingService)
	if err != nil {
		return Runner{}, err
	}
	userService, err := userimpl.ProvideService(sqlStore, orgService, cfg, teamService, cacheService, tracingService, quotaService, bundleregistryService)
	if err != nil {
		return Runner{}, err
	}
	serverLockService := serverlock.ProvideService(sqlStore, tracingService)
	userAuthTokenService, err := authimpl.ProvideUserAuthTokenService(sqlStore, serverLockService, quotaService, secretsService, cfg, tracingService, featureToggles)
	if err != nil {
		return Runner{}, err
	}
	enterpriseUserAuthTokenService := auth.ProvideService(sqlStore, licenseTokenService, usageStats, userAuthTokenService, userService, cfg)
	registerer := metrics.ProvideRegisterer()
	loginStore := authinfoimpl.ProvideStore(sqlStore, secretsService)
	remoteCache, err := remotecache.ProvideService(cfg, sqlStore, usageStats, secretsService)
	if err != nil {
		return Runner{}, err
	}
	authinfoimplService := authinfoimpl.ProvideService(loginStore, remoteCache, secretsService)
	authnimplService := authnimpl.ProvideService(cfg, tracingService, enterpriseUserAuthTokenService, usageStats, registerer, authinfoimplService)
	authnService := authnimpl.ProvideAuthnService(authnimplService)
	actionSetService := resourcepermissions.NewActionSetService()
	accessControlStore := database3.ProvideService(sqlStore, featureToggles, tracingService)
	permissionRegistry := permreg.ProvidePermissionRegistry()
	acimplService, err := acimpl2.ProvideService(cfg, routeRegisterImpl, licenseTokenService, cacheService, accessControl, sqlStore, userService, authnService, actionSetService, featureToggles, serverLockService, accessControlStore, tracingService, permissionRegistry)
	if err != nil {
		return Runner{}, err
	}
	implementation, err := settingsprovider.ProvideService(cfg, featureToggles, sqlStore, routeRegisterImpl, secretsService, accessControl, acimplService)
	if err != nil {
		return Runner{}, err
	}
	secretsMigrator := migrator.ProvideSecretsMigrator(serviceService, secretsService, sqlStore, implementation, featureToggles)
	migratorSecretsMigrator := migrator2.ProvideSecretsMigrator(secretsMigrator)
	runner := NewRunner(cfg, sqlStore, implementation, serviceService, featureToggles, secretsService, migratorSecretsMigrator, userService)
	return runner, nil
}

// InitializeForCLITarget is a simplified set of dependencies for the CLI, used
// by the server target subcommand to launch specific dskit modules.
func InitializeForCLITarget(cfg *setting.Cfg) (ModuleRunner, error) {
	featureManager, err := featuremgmt.ProvideManagerService(cfg)
	if err != nil {
		return ModuleRunner{}, err
	}
	featureToggles := featuremgmt.ProvideToggles(featureManager)
	ossMigrations := migrations.ProvideOSSMigrations(featureToggles)
	enterpriseMigrations := migrations2.ProvideEnterpriseMigrations(cfg, ossMigrations, featureToggles)
	tracingConfig, err := tracing.ProvideTracingConfig(cfg)
	if err != nil {
		return ModuleRunner{}, err
	}
	tracingService, err := tracing.ProvideService(tracingConfig)
	if err != nil {
		return ModuleRunner{}, err
	}
	inProcBus := bus.ProvideBus(tracingService)
	sqlStore, err := sqlstore.ProvideService(cfg, featureToggles, enterpriseMigrations, inProcBus, tracingService)
	if err != nil {
		return ModuleRunner{}, err
	}
	routeRegisterImpl := routing.ProvideRegister()
	secretsStoreImpl := database.ProvideSecretsStore(sqlStore)
	providerProvider := provider.ProvideEncryptionProvider()
	licensingStore, err := database2.ProvideStore(sqlStore)
	if err != nil {
		return ModuleRunner{}, err
	}
	licenseTokenService, err := service2.ProvideLicenseTokenService(cfg, licensingStore)
	if err != nil {
		return ModuleRunner{}, err
	}
	encryptionProvider := encryption.ProvideEncryptionProvider(providerProvider, licenseTokenService)
	kvStore := kvstore.ProvideService(sqlStore)
	accessControl := acimpl.ProvideAccessControl(featureToggles)
	bundleregistryService := bundleregistry.ProvideService()
	usageStats, err := service.ProvideService(cfg, kvStore, routeRegisterImpl, tracingService, accessControl, bundleregistryService)
	if err != nil {
		return ModuleRunner{}, err
	}
	serviceService, err := service3.ProvideEncryptionService(tracingService, encryptionProvider, usageStats, cfg)
	if err != nil {
		return ModuleRunner{}, err
	}
	osskmsprovidersService := osskmsproviders.ProvideService(serviceService, cfg, featureToggles)
	keyProvidersService := kmsproviders.ProvideService(osskmsprovidersService, cfg, featureToggles, licenseTokenService)
	secretsService, err := manager.ProvideSecretsService(tracingService, secretsStoreImpl, keyProvidersService, serviceService, cfg, featureToggles, usageStats)
	if err != nil {
		return ModuleRunner{}, err
	}
	cacheService := localcache.ProvideService()
	quotaService := quotaimpl.ProvideService(sqlStore, cfg)
	orgService, err := orgimpl.ProvideService(sqlStore, cfg, quotaService)
	if err != nil {
		return ModuleRunner{}, err
	}
	teamService, err := teamimpl.ProvideService(sqlStore, cfg, tracingService)
	if err != nil {
		return ModuleRunner{}, err
	}
	userService, err := userimpl.ProvideService(sqlStore, orgService, cfg, teamService, cacheService, tracingService, quotaService, bundleregistryService)
	if err != nil {
		return ModuleRunner{}, err
	}
	serverLockService := serverlock.ProvideService(sqlStore, tracingService)
	userAuthTokenService, err := authimpl.ProvideUserAuthTokenService(sqlStore, serverLockService, quotaService, secretsService, cfg, tracingService, featureToggles)
	if err != nil {
		return ModuleRunner{}, err
	}
	enterpriseUserAuthTokenService := auth.ProvideService(sqlStore, licenseTokenService, usageStats, userAuthTokenService, userService, cfg)
	registerer := metrics.ProvideRegisterer()
	loginStore := authinfoimpl.ProvideStore(sqlStore, secretsService)
	remoteCache, err := remotecache.ProvideService(cfg, sqlStore, usageStats, secretsService)
	if err != nil {
		return ModuleRunner{}, err
	}
	authinfoimplService := authinfoimpl.ProvideService(loginStore, remoteCache, secretsService)
	authnimplService := authnimpl.ProvideService(cfg, tracingService, enterpriseUserAuthTokenService, usageStats, registerer, authinfoimplService)
	authnService := authnimpl.ProvideAuthnService(authnimplService)
	actionSetService := resourcepermissions.NewActionSetService()
	accessControlStore := database3.ProvideService(sqlStore, featureToggles, tracingService)
	permissionRegistry := permreg.ProvidePermissionRegistry()
	acimplService, err := acimpl2.ProvideService(cfg, routeRegisterImpl, licenseTokenService, cacheService, accessControl, sqlStore, userService, authnService, actionSetService, featureToggles, serverLockService, accessControlStore, tracingService, permissionRegistry)
	if err != nil {
		return ModuleRunner{}, err
	}
	implementation, err := settingsprovider.ProvideService(cfg, featureToggles, sqlStore, routeRegisterImpl, secretsService, accessControl, acimplService)
	if err != nil {
		return ModuleRunner{}, err
	}
	moduleRunner := NewModuleRunner(cfg, implementation, featureToggles)
	return moduleRunner, nil
}

// InitializeModuleServer is a simplified set of dependencies for the CLI,
// suitable for running background services and targeting dskit modules.
func InitializeModuleServer(cfg *setting.Cfg, opts Options, apiOpts api.ServerOptions) (*ModuleServer, error) {
	featureManager, err := featuremgmt.ProvideManagerService(cfg)
	if err != nil {
		return nil, err
	}
	featureToggles := featuremgmt.ProvideToggles(featureManager)
	registerer := metrics.ProvideRegisterer()
	storageMetrics := resource.ProvideStorageMetrics(registerer)
	bleveIndexMetrics := resource.ProvideIndexMetrics(registerer)
	gatherer := metrics.ProvideGatherer()
	tracingConfig, err := tracing.ProvideTracingConfig(cfg)
	if err != nil {
		return nil, err
	}
	tracingService, err := tracing.ProvideService(tracingConfig)
	if err != nil {
		return nil, err
	}
	ossMigrations := migrations.ProvideOSSMigrations(featureToggles)
	enterpriseMigrations := migrations2.ProvideEnterpriseMigrations(cfg, ossMigrations, featureToggles)
	inProcBus := bus.ProvideBus(tracingService)
	sqlStore, err := sqlstore.ProvideService(cfg, featureToggles, enterpriseMigrations, inProcBus, tracingService)
	if err != nil {
		return nil, err
	}
	licensingStore, err := database2.ProvideStore(sqlStore)
	if err != nil {
		return nil, err
	}
	licenseTokenService, err := service2.ProvideLicenseTokenService(cfg, licensingStore)
	if err != nil {
		return nil, err
	}
	moduleServer, err := NewModule(opts, apiOpts, featureToggles, cfg, storageMetrics, bleveIndexMetrics, registerer, gatherer, tracingService, licenseTokenService)
	if err != nil {
		return nil, err
	}
	return moduleServer, nil
}

// Initialize the standalone APIServer factory
func InitializeAPIServerFactory() (standalone.APIServerFactory, error) {
	apiServerFactory := apiserver2.ProvideAPIFactory()
	return apiServerFactory, nil
}

func InitializeDocumentBuilders(cfg *setting.Cfg) (resource.DocumentBuilderSupplier, error) {
	featureManager, err := featuremgmt.ProvideManagerService(cfg)
	if err != nil {
		return nil, err
	}
	featureToggles := featuremgmt.ProvideToggles(featureManager)
	ossMigrations := migrations.ProvideOSSMigrations(featureToggles)
	enterpriseMigrations := migrations2.ProvideEnterpriseMigrations(cfg, ossMigrations, featureToggles)
	tracingConfig, err := tracing.ProvideTracingConfig(cfg)
	if err != nil {
		return nil, err
	}
	tracingService, err := tracing.ProvideService(tracingConfig)
	if err != nil {
		return nil, err
	}
	inProcBus := bus.ProvideBus(tracingService)
	sqlStore, err := sqlstore.ProvideService(cfg, featureToggles, enterpriseMigrations, inProcBus, tracingService)
	if err != nil {
		return nil, err
	}
	legacyDatabaseProvider := usageinsights.ProvideLegacyDatabaseProvider(sqlStore)
	legacySQLStore := usageinsights.ProvideLegacySQLStores(legacyDatabaseProvider)
	storage, err := usageinsights.ProvideStorage(legacySQLStore, tracingService)
	if err != nil {
		return nil, err
	}
	registerer := metrics.ProvideRegisterer()
	sprinklesMetrics := usageinsights2.ProvideSprinklesMetrics(registerer)
	usageinsightsService, err := usageinsights2.ProvideService(cfg, featureManager, storage, sprinklesMetrics)
	if err != nil {
		return nil, err
	}
	documentBuilderSupplier := search.ProvideDocumentBuilders(sqlStore, usageinsightsService)
	return documentBuilderSupplier, nil
}

// wire.go:

func otelTracer() trace.Tracer {
	return otel.GetTracerProvider().Tracer("grafana")
}

var withOTelSet = wire.NewSet(
	otelTracer, grpcserver.ProvideService, interceptors.ProvideAuthenticator,
)

var wireBasicSet = wire.NewSet(annotationsimpl.ProvideService, wire.Bind(new(annotations.Repository), new(*annotationsimpl.RepositoryImpl)), New, api.ProvideHTTPServer, query.ProvideService, wire.Bind(new(query.Service), new(*query.ServiceImpl)), bus.ProvideBus, wire.Bind(new(bus.Bus), new(*bus.InProcBus)), rendering.ProvideService, wire.Bind(new(rendering.Service), new(*rendering.RenderingService)), routing.ProvideRegister, wire.Bind(new(routing.RouteRegister), new(*routing.RouteRegisterImpl)), hooks.ProvideService, kvstore.ProvideService, localcache.ProvideService, bundleregistry.ProvideService, wire.Bind(new(supportbundles.Service), new(*bundleregistry.Service)), updatemanager.ProvideGrafanaService, updatemanager.ProvidePluginsService, service.ProvideService, wire.Bind(new(usagestats.Service), new(*service.UsageStats)), validator.ProvideService, legacy.ProvideLegacyMigrator, pluginsintegration2.WireSet, dashboards.ProvideFileStoreManager, wire.Bind(new(dashboards.FileStore), new(*dashboards.FileStoreManager)), cloudwatch.ProvideService, cloudmonitoring.ProvideService, azuremonitor.ProvideService, postgres.ProvideService, mysql.ProvideService, mssql.ProvideService, store.ProvideEntityEventsService, dualwrite.ProvideService, httpclientprovider.New, wire.Bind(new(httpclient.Provider), new(*httpclient2.Provider)), serverlock.ProvideService, annotationsimpl.ProvideCleanupService, wire.Bind(new(annotations.Cleaner), new(*annotationsimpl.CleanupServiceImpl)), cleanup.ProvideService, shorturlimpl.ProvideService, wire.Bind(new(shorturls.Service), new(*shorturlimpl.ShortURLService)), queryhistory.ProvideService, wire.Bind(new(queryhistory.Service), new(*queryhistory.QueryHistoryService)), correlations.ProvideService, wire.Bind(new(correlations.Service), new(*correlations.CorrelationsService)), quotaimpl.ProvideService, remotecache.ProvideService, wire.Bind(new(remotecache.CacheStorage), new(*remotecache.RemoteCache)), authinfoimpl.ProvideService, wire.Bind(new(login.AuthInfoService), new(*authinfoimpl.Service)), authinfoimpl.ProvideStore, datasourceproxy.ProvideService, sort.ProvideService, search2.ProvideService, searchV2.ProvideService, searchV2.ProvideSearchHTTPService, store.ProvideService, store.ProvideSystemUsersService, live.ProvideService, pushhttp.ProvideService, contexthandler.ProvideService, service13.ProvideService, wire.Bind(new(service13.LDAP), new(*service13.LDAPImpl)), jwt.ProvideService, wire.Bind(new(jwt.JWTService), new(*jwt.AuthService)), store2.ProvideDBStore, image.ProvideDeleteExpiredService, ngalert.ProvideService, librarypanels.ProvideService, wire.Bind(new(librarypanels.Service), new(*librarypanels.LibraryPanelService)), libraryelements.ProvideService, wire.Bind(new(libraryelements.Service), new(*libraryelements.LibraryElementService)), notifications.ProvideService, notifications.ProvideSmtpService, github.ProvideFactory, tracing.ProvideService, tracing.ProvideTracingConfig, wire.Bind(new(tracing.Tracer), new(*tracing.TracingService)), withOTelSet, testdatasource.ProvideService, api4.ProvideService, opentsdb.ProvideService, socialimpl.ProvideService, influxdb.ProvideService, wire.Bind(new(social.Service), new(*socialimpl.SocialService)), tempo.ProvideService, loki.ProvideService, graphite.ProvideService, prometheus.ProvideService, elasticsearch.ProvideService, pyroscope.ProvideService, parca.ProvideService, zipkin.ProvideService, jaeger.ProvideService, service9.ProvideCacheService, wire.Bind(new(datasources2.CacheService), new(*service9.CacheServiceImpl)), service3.ProvideEncryptionService, wire.Bind(new(encryption4.Internal), new(*service3.Service)), manager.ProvideSecretsService, wire.Bind(new(secrets.Service), new(*manager.SecretsService)), database.ProvideSecretsStore, wire.Bind(new(secrets.Store), new(*database.SecretsStoreImpl)), grafanads.ProvideService, wire.Bind(new(dashboardsnapshots.Store), new(*database7.DashboardSnapshotStore)), database7.ProvideStore, wire.Bind(new(dashboardsnapshots.Service), new(*service10.ServiceImpl)), service10.ProvideService, service9.ProvideService, wire.Bind(new(datasources2.DataSourceService), new(*service9.Service)), service9.ProvideLegacyDataSourceLookup, retriever.ProvideService, wire.Bind(new(serviceaccounts.ServiceAccountRetriever), new(*retriever.Service)), ossaccesscontrol.ProvideServiceAccountPermissions, wire.Bind(new(accesscontrol2.ServiceAccountPermissionsService), new(*ossaccesscontrol.ServiceAccountPermissionsService)), manager2.ProvideServiceAccountsService, proxy.ProvideServiceAccountsProxy, wire.Bind(new(serviceaccounts.Service), new(*proxy.ServiceAccountsProxy)), mtdsclient.NewNullMTDatasourceClientBuilder, expr.ProvideService, featuremgmt.ProvideManagerService, featuremgmt.ProvideToggles, service7.ProvideDashboardServiceImpl, wire.Bind(new(dashboards2.PermissionsRegistrationService), new(*service7.DashboardServiceImpl)), service7.ProvideDashboardService, service7.ProvideDashboardProvisioningService, service7.ProvideDashboardPluginService, database4.ProvideDashboardStore, folderimpl.ProvideService, wire.Bind(new(folder.Service), new(*folderimpl.Service)), folderimpl.ProvideStore, wire.Bind(new(folder.Store), new(*folderimpl.FolderStoreImpl)), folderimpl.ProvideDashboardFolderStore, wire.Bind(new(folder.FolderStore), new(*folderimpl.DashboardFolderStoreImpl)), service12.ProvideService, wire.Bind(new(dashboardimport.Service), new(*service12.ImportDashboardService)), service8.ProvideService, wire.Bind(new(plugindashboards.Service), new(*service8.Service)), service8.ProvideDashboardUpdater, sanitizer.ProvideService, kvstore2.ProvideService, avatar.ProvideAvatarCacheServer, statscollector.ProvideService, csrf.ProvideCSRFFilter, wire.Bind(new(csrf.Service), new(*csrf.CSRF)), ossaccesscontrol.ProvideTeamPermissions, wire.Bind(new(accesscontrol2.TeamPermissionsService), new(*ossaccesscontrol.TeamPermissionsService)), ossaccesscontrol.ProvideFolderPermissions, wire.Bind(new(accesscontrol2.FolderPermissionsService), new(*ossaccesscontrol.FolderPermissionsService)), ossaccesscontrol.ProvideDashboardPermissions, wire.Bind(new(accesscontrol2.DashboardPermissionsService), new(*ossaccesscontrol.DashboardPermissionsService)), ossaccesscontrol.ProvideReceiverPermissionsService, wire.Bind(new(accesscontrol2.ReceiverPermissionsService), new(*ossaccesscontrol.ReceiverPermissionsService)), starimpl.ProvideService, playlistimpl.ProvideService, apikeyimpl.ProvideService, dashverimpl.ProvideService, service4.ProvideService, wire.Bind(new(publicdashboards.Service), new(*service4.PublicDashboardServiceImpl)), database5.ProvideStore, wire.Bind(new(publicdashboards.Store), new(*database5.PublicDashboardStoreImpl)), metric.ProvideService, api2.ProvideApi, api3.ProvideApi, userimpl.ProvideService, orgimpl.ProvideService, orgimpl.ProvideDeletionService, statsimpl.ProvideService, grpccontext.ProvideContextHandler, grpcserver.ProvideHealthService, grpcserver.ProvideReflectionService, resolver.ProvideEntityReferenceResolver, teamimpl.ProvideService, teamapi.ProvideTeamAPI, tempuserimpl.ProvideService, loginattemptimpl.ProvideService, wire.Bind(new(loginattempt.Service), new(*loginattemptimpl.Service)), migrations3.ProvideDataSourceMigrationService, migrations3.ProvideSecretMigrationProvider, wire.Bind(new(migrations3.SecretMigrationProvider), new(*migrations3.SecretMigrationProviderImpl)), resourcepermissions.NewActionSetService, wire.Bind(new(accesscontrol2.ActionResolver), new(resourcepermissions.ActionSetService)), wire.Bind(new(pluginaccesscontrol.ActionSetRegistry), new(resourcepermissions.ActionSetService)), permreg.ProvidePermissionRegistry, acimpl.ProvideAccessControl, dualwrite2.ProvideZanzanaReconciler, navtreeimpl.ProvideService, wire.Bind(new(accesscontrol2.AccessControl), new(*acimpl.AccessControl)), wire.Bind(new(notifications.TempUserStore), new(tempuser.Service)), tagimpl.ProvideService, wire.Bind(new(tag.Service), new(*tagimpl.Service)), authnimpl.ProvideService, authnimpl.ProvideIdentitySynchronizer, authnimpl.ProvideAuthnService, authnimpl.ProvideAuthnServiceAuthenticateOnly, authnimpl.ProvideRegistration, supportbundlesimpl.ProvideService, extsvcaccounts.ProvideExtSvcAccountsService, wire.Bind(new(serviceaccounts.ExtSvcAccountsService), new(*extsvcaccounts.ExtSvcAccountsService)), registry2.ProvideExtSvcRegistry, wire.Bind(new(extsvcauth.ExternalServiceRegistry), new(*registry2.Registry)), anonstore.ProvideAnonDBStore, wire.Bind(new(anonstore.AnonStore), new(*anonstore.AnonDBStore)), loggermw.Provide, slogadapter.Provide, signingkeysimpl.ProvideEmbeddedSigningKeysService, wire.Bind(new(signingkeys.Service), new(*signingkeysimpl.Service)), ssosettingsimpl.ProvideService, wire.Bind(new(ssosettings.Service), new(*ssosettingsimpl.Service)), idimpl.ProvideService, wire.Bind(new(auth2.IDService), new(*idimpl.Service)), cloudmigrationimpl.ProvideService, userimpl.ProvideVerifier, connectors.ProvideOrgRoleMapper, wire.Bind(new(user.Verifier), new(*userimpl.Verifier)), authz.WireSet, metadata.ProvideSecureValueMetadataStorage, metadata.ProvideKeeperMetadataStorage, metadata.ProvideDecryptStorage, decrypt.ProvideDecryptAuthorizer, decrypt.ProvideDecryptAllowList, encryption2.ProvideDataKeyStorage, encryption2.ProvideEncryptedValueStorage, service16.ProvideSecureValueService, migrator3.NewWithEngine, database13.ProvideDatabase, wire.Bind(new(contracts.Database), new(*database13.Database)), manager5.ProvideEncryptionManager, encryption3.ProvideThirdPartyProviderMap, resource.ProvideStorageMetrics, resource.ProvideIndexMetrics, apiserver.WireSet, apiregistry.WireSet, appregistry.WireSet)

var wireSet = wire.NewSet(
	wireBasicSet, metrics.WireSet, sqlstore.ProvideService, metrics2.ProvideService, wire.Bind(new(notifications.Service), new(*notifications.NotificationService)), wire.Bind(new(notifications.WebhookSender), new(*notifications.NotificationService)), wire.Bind(new(notifications.EmailSender), new(*notifications.NotificationService)), wire.Bind(new(db.DB), new(*sqlstore.SQLStore)), prefimpl.ProvideService, oauthtoken.ProvideService, wire.Bind(new(oauthtoken.OAuthTokenService), new(*oauthtoken.Service)), wire.Bind(new(cleanup.AlertRuleService), new(*store2.DBstore)),
)

var wireCLISet = wire.NewSet(
	NewRunner,
	wireBasicSet, metrics.WireSet, sqlstore.ProvideService, metrics2.ProvideService, wire.Bind(new(notifications.Service), new(*notifications.NotificationService)), wire.Bind(new(notifications.WebhookSender), new(*notifications.NotificationService)), wire.Bind(new(notifications.EmailSender), new(*notifications.NotificationService)), wire.Bind(new(db.DB), new(*sqlstore.SQLStore)), prefimpl.ProvideService, oauthtoken.ProvideService, wire.Bind(new(oauthtoken.OAuthTokenService), new(*oauthtoken.Service)),
)

var wireTestSet = wire.NewSet(
	wireBasicSet,
	ProvideTestEnv, metrics.WireSetForTest, sqlstore.ProvideServiceForTests, metrics2.ProvideServiceForTest, notifications.MockNotificationService, wire.Bind(new(notifications.Service), new(*notifications.NotificationServiceMock)), wire.Bind(new(notifications.WebhookSender), new(*notifications.NotificationServiceMock)), wire.Bind(new(notifications.EmailSender), new(*notifications.NotificationServiceMock)), wire.Bind(new(db.DB), new(*sqlstore.SQLStore)), prefimpl.ProvideService, oauthtoken.ProvideService, oauthtokentest.ProvideService, wire.Bind(new(oauthtoken.OAuthTokenService), new(*oauthtokentest.Service)), wire.Bind(new(cleanup.AlertRuleService), new(*store2.DBstore)),
)
